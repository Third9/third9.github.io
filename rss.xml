<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Third9's Lounge]]></title><description><![CDATA[Third9's Lounge]]></description><link>https://third9.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 21 Jun 2020 08:32:24 GMT</lastBuildDate><item><title><![CDATA[React환경의 Multi-Proxy 구현]]></title><description><![CDATA[React환경에서 multi-proxy사용하기]]></description><link>https://third9.github.io/posts/multi-proxy_of_react/</link><guid isPermaLink="false">https://third9.github.io/posts/multi-proxy_of_react/</guid><pubDate>Sun, 21 Jun 2020 07:53:12 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;🚨아래에서 설명할 proxy customize를 원활히 수행하기 위해서는 CRA(v2)가 필수이다. react 프로젝트 생성시에 CRA(v2)를 이용하지 않았을 경우 원활한 수행이 안될 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;-개요&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-%EA%B0%9C%EC%9A%94&quot; aria-label=&quot; 개요 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;• 개요&lt;/h2&gt;
&lt;p&gt;React를 이용한 프로젝트를 진행하면서 겪었던 삽질들을 하나하나 정리중이다. 그 중에서 React를 이용하여 외부의 API 를 호출할때 cors 이슈가 발생하였는데, 해당 이슈는 server 에서 response 되는 내용의 header에 &lt;code class=&quot;language-text&quot;&gt;&amp;#39;Access-Control-Allow-Origin&amp;#39;: &amp;#39;*&amp;#39;&lt;/code&gt; 를 넣어주면 해결이 되는 것으로 알고 있지만 server를 수정할 수 있는 권한이 없는 경우에는 reactjs 의 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; 에 &lt;code class=&quot;language-text&quot;&gt;proxy&lt;/code&gt; 설정을 해주면 된다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;💡Proxy와 관련한 설정은 수정한 경우, react test 서버를 재시작해줘야 한다. js 코드가 변경되었을때 자동을 hot-load 되는 형식으로는 proxy설정이 반영되지 않는다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;-package를-이용한-기본-proxy-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-package%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B8%B0%EB%B3%B8-proxy-%EC%84%A4%EC%A0%95&quot; aria-label=&quot; package를 이용한 기본 proxy 설정 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;• Package를 이용한 기본 proxy 설정&lt;/h2&gt;
&lt;p&gt;reactjs를 셋팅하면 기본적으로 설정되는 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; 파일에 아래와 같이 선언을 해주면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// package.json&lt;/span&gt;

...
&lt;span class=&quot;token property&quot;&gt;&quot;proxy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://local.test.com&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아래는 proxy test를 위해서 임의로 작성한 코드이며, http 통신은 axios를 이용하였다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// apiConnectTest.js&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; axios &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;axios&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// HTTP GET&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getReq&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;	&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/local/req&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;	  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// HTTP POST&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;postReq&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;	&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/remote/req&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;	  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 코드를 선언하고, &lt;code class=&quot;language-text&quot;&gt;getReq&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;postReq&lt;/code&gt; function을 호출하게 된다면 두 요청 모두 우리가 위에서 설정한 proxy 경로를 타고 호출된다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;getReq ⇒ http://local.test.com/local/req
postReq ⇒ http://local.test.com/remote/req&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다만, 서비스 종류에 따라서 한곳이 아닌 복수의 경로로 호출을 해야할 수 있다. 그러한 경우에는 &lt;code class=&quot;language-text&quot;&gt;http-proxy-middleware&lt;/code&gt; 를 이용한다.&lt;/p&gt;
&lt;h2 id=&quot;-http-proxy-middleware를-이용한-multi-proxy-처리&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-http-proxy-middleware%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-multi-proxy-%EC%B2%98%EB%A6%AC&quot; aria-label=&quot; http proxy middleware를 이용한 multi proxy 처리 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;• http-proxy-middleware를 이용한 Multi-proxy 처리&lt;/h2&gt;
&lt;p&gt;multiproxy 기능을 사용하기 위해서는 우선 &lt;code class=&quot;language-text&quot;&gt;http-proxy-middleware&lt;/code&gt;를 설치하여야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; http-proxy-middleware&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기본 src 폴더 하위에 &lt;code class=&quot;language-text&quot;&gt;setupProxy.js&lt;/code&gt; 파일을 아래와 같은 형태로 작성한다. 맨 위에서도 설명하였지만, setupProxy를 통한 proxy customize는 해당 프로젝트를 CRA(v2)를 이용하여 생성하였어야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// setupProxy.js&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createProxyMiddleware &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http-proxy-middleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// auth 포함 하위 route에 대해서는 localhost:5000/v1을 domain으로 하여 proxy설정&lt;/span&gt;
  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
		&lt;span class=&quot;token string&quot;&gt;&apos;/local&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
		&lt;span class=&quot;token function&quot;&gt;createProxyMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
			target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://local.test.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
			changeOrigin&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// dummy 포함 하위 route에 대해서는 localhost:6000/v1을 domain으로 하여 proxy설정&lt;/span&gt;
  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
		&lt;span class=&quot;token string&quot;&gt;&apos;/remote&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;createProxyMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://remote.test.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
			changeOrigin&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 작성한 경우 route 설정에 따라서 동작하며, 위에서 사용했던 &lt;code class=&quot;language-text&quot;&gt;apiConnectTest.js&lt;/code&gt; 코드를 예로 든다면 아래와 같이 동작한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;getReq ⇒ http://local.test.com/local/req
postReq ⇒ http://remote.test.com/remote/req&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서는 언급하지 않았지만  &lt;code class=&quot;language-text&quot;&gt;http-proxy-middleware&lt;/code&gt; 모듈을 이용하면 pathRewrite 옵션을 통해서 새로운 api로의 rewrite 기능도 사용이 가능하다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[네이버 카페 Crawling 2: cafe글 가져오기]]></title><description><![CDATA[개발자 아빠가 아이의 사진을 관리하는 법]]></description><link>https://third9.github.io/posts/네이버_카페_crawling2/</link><guid isPermaLink="false">https://third9.github.io/posts/네이버_카페_crawling2/</guid><pubDate>Sat, 18 Apr 2020 16:45:24 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;이전글 보기 &lt;a href=&quot;/posts/%EB%84%A4%EC%9D%B4%EB%B2%84_%EC%B9%B4%ED%8E%98_crawling1&quot;&gt;네이버 카페 Crawling 1: cafe 인증&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;이전 글에서 pyppetter를 이용해서 카페 인증 및 화면 이동까지 설명했었다. 여기서는 카페에서 글 목록을 가져오고, 해당 글에서 내용(이미지)를 가져오는 부분을 다루도록 한다.&lt;/p&gt;
&lt;p&gt;필자의 경우 자녀의 카페 사진을 가져오기 위해서 해당 프로그램을 만들었기에 글 목록과 글의 이미지 정도의 내용 만으로도 충분하지만, 더 많은 정보를 가져오고 싶다면 여기서 다루는 내용을 응용하여 충분히 원하는 정보를 추출 할 수 있다고 본다.&lt;/p&gt;
&lt;h2 id=&quot;step-1-카페-게시글-화면-이동&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#step-1-%EC%B9%B4%ED%8E%98-%EA%B2%8C%EC%8B%9C%EA%B8%80-%ED%99%94%EB%A9%B4-%EC%9D%B4%EB%8F%99&quot; aria-label=&quot;step 1 카페 게시글 화면 이동 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 1: 카페 게시글 화면 이동&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;💡해당 글에서 설명하는 코드에 있는 xpath의 위치 및 selector 경로는 모두 chrome의 개발자 도구를 통해서 확인 하고 찾은 값이다. 추후에 경로가 달라진다면 개발자 도구 등을 이용하여 위치를 찾으면 된다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;전의 글에 이어서 인증을 하였다면, 이제 원하는 카페의 글들을 가져오기 위해서 해당 카페의 페이지로 이동을 하여야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 페이지 이동&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;## cafe_url에는 본인이 이동하고자 하는 url 주소를 입력하면 된다.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;goto&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cafe_url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 코드로 원하는 카페의 페이지로 이동이 가능하다. 잘 모르겠다면 이전 글을 참조하자.&lt;/p&gt;
&lt;h2 id=&quot;step-2-카페-게시글의-이미지-가져오기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#step-2-%EC%B9%B4%ED%8E%98-%EA%B2%8C%EC%8B%9C%EA%B8%80%EC%9D%98-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0&quot; aria-label=&quot;step 2 카페 게시글의 이미지 가져오기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 2: 카페 게시글의 이미지 가져오기&lt;/h2&gt;
&lt;p&gt;카페의 이미지를 가져오기 위해서는 내가 원하는 글이 있는 링크를 위해서 표현한대로 &lt;code class=&quot;language-text&quot;&gt;page.goto(게시글 URL)&lt;/code&gt;방식을 통해서 이동하면 된다.
&lt;code class=&quot;language-text&quot;&gt;page&lt;/code&gt; 객체에 현재 내가 접근한 page의 정보들이 모두 들어있기에 위에서 이동한 &lt;code class=&quot;language-text&quot;&gt;page&lt;/code&gt; 객체를 이용해야 한다.&lt;/p&gt;
&lt;p&gt;네이버 카페는 사이드의 목록정보와 본문글이 frame으로 각기 나뉘어 있기에 본문이 있는 frame에 접근한 후에글의 내용을 가져와야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 카페 메인 프레임 선택&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;## pyppeteet를 이용하여 elems을 가져올때는 return 되는 type은 기본적으로 list(array) 형태를 띈다.&lt;/span&gt;
main_frame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;frame &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; frame &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frames &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;cafe_main&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 형태로 본문이 있는 main frame에 접근하여서 &lt;code class=&quot;language-text&quot;&gt;main_frame&lt;/code&gt; 객체에게서 글의 내용 제목등을 가져올 수 있다. &lt;/p&gt;
&lt;p&gt;아래의 코드를 참조하자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos; 
main-frame에서 xpath 상으로 class명이 tit-box인 element 목록을 추출한다.
해당 class elem에 글의 제목 및 title에 위치하는 관련정보들이 존재한다.&apos;&apos;&apos;&lt;/span&gt;
elem_title_box &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; main_frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@class=&quot;tit-box&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 위의 목록에서 실제 element를 가져온다.(xpath 등과 같이 element 정보를 가져오면 모두 list형태를 띈다)&lt;/span&gt;
title_box &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elem_title_box&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 해당 query에 만족하는 elem의 Text를 가져온다.(여기선 게시글의 제목)&lt;/span&gt;
article_title &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; title_box&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Jeval&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;div.fl tbody span.b.m-tcol-c&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;node =&gt; node.innerText&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 위의 코드를 보면 &lt;code class=&quot;language-text&quot;&gt;Jeval&lt;/code&gt; method가 존재한다. 이는 기존에 &lt;code class=&quot;language-text&quot;&gt;document.querySelector&lt;/code&gt; 와 같은 기능을 하는데, 다른점은 해당 기능을 수행 후  &lt;code class=&quot;language-text&quot;&gt;eval&lt;/code&gt; 기능을 수행한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;💡Pyppetter문서에서는 &lt;code class=&quot;language-text&quot;&gt;Jeval&lt;/code&gt; 에 대해서 아래와 같이 설명합니다.
&lt;code class=&quot;language-text&quot;&gt;Jeval(selector: str, pageFunction: str, *args) → Any&lt;/code&gt;&lt;br&gt;
alias to querySelectorAllEval()&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;위의 코드에서 게시글의 제목을 가져오는건 필자가 목적했던 바의 부수적인 부분이다, 필자의 주 목적인 이미지들을 가져오는 기능이 필요하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# main_frame 객체에서 게시글의 본문내용을 가지고 있는 tbody라는 id를 가진 elem을 가져옵니다.&lt;/span&gt;
elem_body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; main_frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;tbody&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 해당 tbody안에 속한 모든 image elem을 가져와서 주소와 id 객체를 가지는 list 형태로 return 합니다.&lt;/span&gt;
article_imgs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; elem_body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JJeval&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;img&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;(nodes) =&gt; nodes.map(n =&gt; { return { src: n.src, name: n.id }})&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 코드를 통해서 tbody안에 있는 모든 img elem 들의 src 주소와 id 정보를 가져올 수 있다. 위의 코드에는 아까 &lt;code class=&quot;language-text&quot;&gt;Jeval&lt;/code&gt; 과 비슷한 &lt;code class=&quot;language-text&quot;&gt;JJeval&lt;/code&gt; method가 보이는데 차이는 &lt;code class=&quot;language-text&quot;&gt;Jeval&lt;/code&gt; 이 찾아진 여러개의 elem들 중에서 첫번째의 elem만 가져온다면, &lt;code class=&quot;language-text&quot;&gt;JJeval&lt;/code&gt;은 모든 elem들을 가져온다는 것이다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;💡Pypetter 문서에서는 &lt;code class=&quot;language-text&quot;&gt;JJeval&lt;/code&gt;에 대해서 아래와 같이 설명합니다.
&lt;code class=&quot;language-text&quot;&gt;JJeval(selector: str, pageFunction: str, *args) → Optional[Dict[KT, VT]]&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;여기까지만 읽어보았어도 위의 코드들을 응용하여 게시글의 원하는 내용들을 Crawling 하는데 문제가 없다고 생각한다.&lt;/p&gt;
&lt;p&gt;다만, 필자의 경우 게시글 하나가 아닌 여러개의 글을 가져와야 했기에 게시글 목록을 가져오는 내용까지 같이 설명하기로 한다.&lt;/p&gt;
&lt;h2 id=&quot;step3-카페-게시글-목록-가져오기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#step3-%EC%B9%B4%ED%8E%98-%EA%B2%8C%EC%8B%9C%EA%B8%80-%EB%AA%A9%EB%A1%9D-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0&quot; aria-label=&quot;step3 카페 게시글 목록 가져오기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step3: 카페 게시글 목록 가져오기&lt;/h2&gt;
&lt;p&gt;카페 게시글 목록 페이지에 접근해서 해당 글들을 가져오면 되는데 한가지 문제가 있다.&lt;/p&gt;
&lt;p&gt;아래의 이미지는 카페 게시글 목록의 상단에 위치한 elem을 캡쳐한 모습인데, 각 카페 게시글마다 운영진의 설정에 따라서 기본 셋팅이 다르다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 788px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a367959a9c38de065b254366e06cfd4a/ea7fb/0419_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 13.333333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAh0lEQVQI102O0QrDIAxF/f/Hfs0+ZC/tgygDYQNXFexsNd6asYYFQnJzk3AURvTeQUSotUqy5nlrTXquNPRGO2qnr1dKkX3Wih+ySClBaw1jDKy1yDmzBeccYowIIeC9rvDuhel5w317gPKBeZnhvZfn6iIUgh/NP7l4vDfqh45B2ITquuM8AeAG6Zoujp6oAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a367959a9c38de065b254366e06cfd4a/8ac56/0419_1.webp 240w,
/static/a367959a9c38de065b254366e06cfd4a/d3be9/0419_1.webp 480w,
/static/a367959a9c38de065b254366e06cfd4a/4d911/0419_1.webp 788w&quot;
          sizes=&quot;(max-width: 788px) 100vw, 788px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a367959a9c38de065b254366e06cfd4a/8ff5a/0419_1.png 240w,
/static/a367959a9c38de065b254366e06cfd4a/e85cb/0419_1.png 480w,
/static/a367959a9c38de065b254366e06cfd4a/ea7fb/0419_1.png 788w&quot;
          sizes=&quot;(max-width: 788px) 100vw, 788px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a367959a9c38de065b254366e06cfd4a/ea7fb/0419_1.png&quot;
          alt=&quot;0419 1&quot;
          title=&quot;0419 1&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;네이버 카페의 게시판은 위의 이미지와 같이 카드, 영상, 앨범, 리스트 등의 형태로 볼 수 있게 되어있고 카페별로 기본 형태가 달라서 가져오기 편하고 한화면에 최대한 많은 글들이 보일 수 있도록 변경해줘야 다음작업을 수행하기에 편하다. 카페의 글을 가져오기 전에 선행작업을 통해서 카페글을 최대한 많이 가져올 수 있는 형태로 바꾸자, 먼저 목록 스타일부터 변경해준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 글 목록이 존재하는 cafe_main frame을 가져옵니다.&lt;/span&gt;
main_frame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;frame &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; frame &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frames &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;cafe_main&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 해당 frame에서 위의 목록 스타일 정보를 가지는 elem을 가져옵니다.&lt;/span&gt;
elem_list_style &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; main_frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;main-area&quot;]/div[@class=&quot;list-style&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 우리는 List 스타일을 원하니 list elem객체를 가져와서 click 합니다.&lt;/span&gt;
elem_btn_sort_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; elem_list_style&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;J&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.sort_area .sort_form .sort_list&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; elem_btn_sort_list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 위의 코드를 보면 &lt;code class=&quot;language-text&quot;&gt;J&lt;/code&gt; method가 존재하는데, 이는 &lt;code class=&quot;language-text&quot;&gt;document.querySelector&lt;/code&gt; 와 같은 기능을 한다.&lt;/p&gt;
&lt;p&gt;목록 스타일을 List 형태로 바꾸었으면, 게시물이 가장 많이 나오는 갯수로 변경을 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 목록의 출력 갯수를 표시하는 elem을 선택합니다.&lt;/span&gt;
elem_page_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; main_frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;listSizeSelectDiv&quot;]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; elem_page_size&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 카페의 목록형식에서 50개씩 나오기 선택&lt;/span&gt;
elem_50_page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; main_frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;listSizeSelectDiv&quot;]/ul/li[7]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; elem_50_page&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 작업까지 했다면 이제 게시물 출력 스타일이 리스트 형태에 게시글을 50개씩 보인다.&lt;/p&gt;
&lt;p&gt;이제 여기서 게시글의 목록을 가져와서 해당 게시글들의 URL 주소를 가져온다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 페이지의 목록들 가져오기&lt;/span&gt;
elem_trs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; main_frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;main-area&quot;]/div[@class=&quot;article-board m-tcol-c&quot;]/table/tbody/tr&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

article_urls &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; idx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tr &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;elem_trs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  tr_article &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; tr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Jeval&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.td_article .board-list .article&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token string&quot;&gt;&apos;node =&gt; { return { href: node.href, title: node.innerText } }&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  article_urls&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tr_article&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;href&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위에서 나오 코드들을 응용하면, 더 다양한 정보의 추출이 가능하고, 위에서 Crawling한 내용들을 DB와 파일형태로 관리한다면 주기적으로 원하는 정보를 수집할 수 있는 자동화 서비스를 만들기에도 수월하다고 생각한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;📌내용이 잘못됬거나 변경된 사항이 있다면 코멘트 바랍니다.&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[네이버 카페 Crawling 1: cafe 인증]]></title><description><![CDATA[개발자 아빠의 어린이집 사진을 수집하는법. Crawling]]></description><link>https://third9.github.io/posts/네이버_카페_crawling1/</link><guid isPermaLink="false">https://third9.github.io/posts/네이버_카페_crawling1/</guid><pubDate>Sat, 14 Mar 2020 05:51:13 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;다음글 보기 &lt;a href=&quot;/posts/%EB%84%A4%EC%9D%B4%EB%B2%84_%EC%B9%B4%ED%8E%98_crawling2&quot;&gt;네이버 카페 Crawling 2: cafe글 가져오기&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;step-1-네이버-카페-crawling&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#step-1-%EB%84%A4%EC%9D%B4%EB%B2%84-%EC%B9%B4%ED%8E%98-crawling&quot; aria-label=&quot;step 1 네이버 카페 crawling permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 1: 네이버 카페 Crawling&lt;/h2&gt;
&lt;p&gt;아이의 어린이집에서 운영하는 카페에 매일 올라오는 사진을 매번 내려받기가 귀찮아서 네이버 카페 crawler를 만들게 되었다. 일주일에 몇 번씩 불규칙하게 올라오는 자녀의 사진을 저장하는 건 생각보다 많은 시간과 에너지를 소모한다.&lt;/p&gt;
&lt;p&gt;주력으로 사용하는 python을 이용해서 처음에는 &lt;a href=&quot;https://www.selenium.dev&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;selenium&lt;/code&gt;&lt;/a&gt;을 가져다가 손쉽게 만들 수 있을 것이라 생각했지만, 네이버의 인증은 생각보다 호락호락하지 않았다. &lt;/p&gt;
&lt;p&gt;selenium을 이용한 인증 방식은 모두 네이버 측에서 사람이 안한걸로 체크하고 걸러내더라, 사람이 하는 것처럼 키입력 방식과 딜레이를 두어도 다 걸러냈다. 그 와중에 알게 된 새로운 headless browser인 &lt;a href=&quot;https://github.com/puppeteer/puppeteer&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;puppeteer&lt;/code&gt;&lt;/a&gt;를 사용해 봤는데 이건 잘되더라, node.js로 만들어져 있어서 언어를 js로 바꿔서 해야 하나 했는데… 이걸 python으로 포팅한 &lt;a href=&quot;https://github.com/miyakogi/pyppeteer&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pyppeteer&lt;/code&gt;&lt;/a&gt; 라는 비공식 프로젝트가 존재했다. 이제 python과 pyppeteer를 이용해서 crawler를 만들었던 내용을 정리한다.&lt;/p&gt;
&lt;h2 id=&quot;step-2-브라우저-열어보기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#step-2-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%97%B4%EC%96%B4%EB%B3%B4%EA%B8%B0&quot; aria-label=&quot;step 2 브라우저 열어보기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 2: 브라우저 열어보기&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;💡여기서 사용되는 html의 element의 위치를 특정하기 위한 값들은 언제든 네이버 측에서  변경하면 바뀔 수 있다. 여기 표기된 위치는 글 작성 시점에서의 path일 뿐 직접 코드를 수행할때는 달라질 수 있다. pyppeteer를 잘 사용하기 위해서는 browser 상에서 원하는 elem의 path를 잘 뽑아내는 것이 매우중요하다. 개인적으로는 크롬의 개발자 모드에서 elem path를 찾는 것을 추천한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;우선 알아둬야할 부분이 pyppetter는 python 3.6 이상부터만 지원을 하는데, 그 이유로는 asyncio의 사용이 필수이기 떄문이다. github과 문서상에서 이유에 대한 내용을 찾지는 못했지만, 개인적으로는 node.js용으로 만들어진 puppeteer도 async/await 등의 비동기 형식으로 동작을 하기에 puppeteer를 포팅하여 만들어졌기에 이러한 부분에 영향을 받은 것으로 생각된다.&lt;/p&gt;
&lt;p&gt;우선 python과 pyppeteer를 이용해서 기본적인 페이지를 열어보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# main.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; pyppeteer &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; launch


&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
  접속을 위한 browser 객체를 만든다. headless 옵션을 False로 하면 리모트용 크롬이 실행되어,
  실제 수행되는 과정을 확인하기 쉽다.
  pyppeteer용 method는 대부분 async/await 처리를 해줘야 한다.
  &apos;&apos;&apos;&lt;/span&gt;
  browser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; launch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headless&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; browser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;newPage&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
  &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
  실제 사용자가 쓰는 browser 처럼 브라우저 버전, 상태정보들을 setting 해준다.
  &apos;&apos;&apos;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setUserAgent&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# waitFor method는 pyppetter를 사용하게 된다면 아주 많이 사용하게 될거다. 1000은 1sec만큼 대기를 한다.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# goto method를 이용해서 원하는 page로의 이동이 가능하다. 여기선 www.naver.com로 이동한다.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;goto&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://www.naver.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; __name__ &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_event_loop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run_until_complete&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 &lt;code class=&quot;language-text&quot;&gt;launch&lt;/code&gt; 에 headless 옵션을 False로 주었기에 remote용 chrome 브라우저가 열리며 우리가 원하는 페이지로의 이동하는 작업을 화면으로 보여준다. 옵션을 True로 주었다면 동일한 기능을 하되 사용자는 UI 상으로 확인은 어렵다.&lt;/p&gt;
&lt;h2 id=&quot;step-3-naver-인증-하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#step-3-naver-%EC%9D%B8%EC%A6%9D-%ED%95%98%EA%B8%B0&quot; aria-label=&quot;step 3 naver 인증 하기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Step 3: Naver 인증 하기&lt;/h2&gt;
&lt;p&gt;일단 오픈된 웹사이트라면 모를까 인증을 거쳐야만 정보를 확인 할 수 있는 사이트라면 인증기능을 구현하는 것이 가장 선행되어야 할 작업이다. 위의 코드에 이어서 인증 부분만을 추가 구현해본다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 여기서 page param은 위의 main method에서 전달받는다.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;naver_auth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# 인증을 위한 naver 페이지로 이동&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;goto&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://nid.naver.com/nidlogin.login?mode=form&amp;amp;url=https%3A%2F%2Fwww.naver.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  auth_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;naver_id&quot;&lt;/span&gt;
  auth_pw &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;naver_pw&quot;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# naver 인증 페이지에서의 id/pw 입력 필드에 값을 입력한다.(해당 elem의 id값은 변경될 수도 있다.)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; auth_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;delay&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#pw&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; auth_pw&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;delay&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#frmNIDLogin &gt; fieldset &gt; input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기까지만 하면 일단 인증은 된다. 다만 네이버 측에서는 새로운 기기로 인증이 되었다는 화면이 뜰거다.&lt;/p&gt;
&lt;p&gt;그 부분은 아래와 같이 추가한다. 위의 naver_auth method에 이어서&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# login 후 해당 장치 인증&lt;/span&gt;
elems_login_and_device_add &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;frmNIDLogin&quot;]/fieldset/span[1]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;elems_login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  login_and_device_add &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elems_login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# login 상태 유지 않함&lt;/span&gt;
  elems_login_persist &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;login_maintain&quot;]/span[2]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  login_persist &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elems_login_persist&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; login_persist&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 코드를 추가하면 된다. 그렇게 되면 naver_auth의 전체코드는 아래와 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;naver_auth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# 인증을 위한 naver 페이지로 이동&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;goto&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://nid.naver.com/nidlogin.login?mode=form&amp;amp;url=https%3A%2F%2Fwww.naver.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  auth_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;naver_id&quot;&lt;/span&gt;
  auth_pw &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;naver_pw&quot;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# naver 인증 페이지에서의 id/pw 입력 필드에 값을 입력한다.(해당 elem의 id값은 변경될 수도 있다.)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; auth_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;delay&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#pw&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; auth_pw&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;delay&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#frmNIDLogin &gt; fieldset &gt; input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# login 후 해당 장치 인증&lt;/span&gt;
  elems_login_and_device_add &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;frmNIDLogin&quot;]/fieldset/span[1]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;elems_login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    login_and_device_add &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elems_login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;# login 상태 유지 않함&lt;/span&gt;
    elems_login_persist &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;login_maintain&quot;]/span[2]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    login_persist &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elems_login_persist&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; login_persist&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;💡참고로 pyppetter를 사용하기 위해서는 내가 수행할 html의 elem의 위치를 정확히 체크해서 해당 자원을 선택할 수 있어야 한다. 나는 xpath를 선호하여 elem의 선택방식을 xpath 값으로 하였지만, 자원을 찾는 방식은 자유롭고 다양하다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;위의 코드에서는 login 상태가 유지되지 않도록 하였다. 여기까지 하였다면 pyppeteer를 이용하여 naver 인증을 마치는 부분 까지 완료됬다. 다만, 이렇게 하면 매번 headless browser를 이용하여 인증할때마다 아래와 같은 화면을 확인하거나, 새로운 기기에서 인증되었다는 메일이 날라올거다.&lt;/p&gt;
&lt;h4 id=&quot;새로운-기기에서-로그인하였다는-화면&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B8%B0%EA%B8%B0%EC%97%90%EC%84%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%95%98%EC%98%80%EB%8B%A4%EB%8A%94-%ED%99%94%EB%A9%B4&quot; aria-label=&quot;새로운 기기에서 로그인하였다는 화면 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;새로운 기기에서 로그인하였다는 화면&lt;/h4&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7377eaf7fd285f5c03c89da4c92d8bc3/3ceac/0314_01.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 79.58333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVQ4y3VUzW7TQBjMmyBxoKU8BBdOSEiU3rhy4QmQeAIkuHABISpQkcqhiABpwgUVEAKpB5oIqihxcJzYcX6cAI7/dv2TpMPuGgfHNZYns9q1ZufbbzYFj1CkQai/5JMImIcQzLFgY8zYy9gjZPltGgU+mQafpDSA7Tk4kF/hUD0Q/FEp4VPnLSrSLqr6F4TBXIgmmycoZJ3xj7ig6ZjYqd3Fs9o9PKnewd7xA7xpPMX9w1tsgyKi4ATuX8Fch4moH4QCQRhhwcqLogWikCFYwKcRAn8mOHbnr5QtHKbFXI+g1++jp+tQNQ1dTWXQMDQMeJQJULoEoXE1buYsVwQ599QBum0dve4AHVmDqvTxe2LBsShs04M9JYItBt+LhPP0Oa46ZLu1JnXUjRoa429oTGLUR1V8H37F8fBoFaMjKL+kfIeUhjBdEzfeXcSV0lls7q8zrOHq/jlsVS7g5vtLuFY+j83yGsM6tsobuPz6DG5/vg7fj/JK5lFxUZGf40XzEYrSNl5KjwWKrW2U5B3Byzm2vtd8iA/dkkjFf7uc+7AgU4v9RDlrC+ScIU3lkHWT+KtwiQeHueecXRPdT5pKc7qcgEfoX3BTeRPNi9dPX4qMYHocBjNQEsCyHdiOi6nFosPYnE5B/UCEn6QE41xmzjBpjmXbUPQ2Wl0JTakFradDbivodFT0+yynqgadMd8oa+hUyfGN8SAbTfwYNTAcGTDGEyEyGI4wnvxcct5R5f7bxCXPBdJ3OxknyLrj+AOWE6V1a1xowgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/7377eaf7fd285f5c03c89da4c92d8bc3/8ac56/0314_01.webp 240w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/d3be9/0314_01.webp 480w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/e46b2/0314_01.webp 960w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/f992d/0314_01.webp 1440w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/5377c/0314_01.webp 1456w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/7377eaf7fd285f5c03c89da4c92d8bc3/8ff5a/0314_01.png 240w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/e85cb/0314_01.png 480w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/d9199/0314_01.png 960w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/07a9c/0314_01.png 1440w,
/static/7377eaf7fd285f5c03c89da4c92d8bc3/3ceac/0314_01.png 1456w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/7377eaf7fd285f5c03c89da4c92d8bc3/d9199/0314_01.png&quot;
          alt=&quot;0314 01&quot;
          title=&quot;0314 01&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이 화면이 매번 나오는 것이 싫다면, 브라우저의 설정 정보를 추가해야 한다. 위에서 초반에 &lt;code class=&quot;language-text&quot;&gt;launch&lt;/code&gt; method를 수행한 것을 기억할거다. 해당 method에 userDataDir param을 선언하고 해당 OS에 적합한 chrome이 설치된 파일 경로를 설정해주면 된다. [&lt;a href=&quot;https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md#Introduction&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;관련문서&lt;/a&gt;]&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# before&lt;/span&gt;
browser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; launch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headless&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# after&lt;/span&gt;
browser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; launch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headless&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; userDataDir&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;OS별 경로&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 변경해주면, 처음을 제외하고는 다시 headless 를 실행할떄 새로운 기기인증과 관련한 화면이나 메일 발송없이 인증이 진행된다.&lt;/p&gt;
&lt;p&gt;지금까지 진행된 내용의 전체 코드는 아래와 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# main.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; asyncio
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; pyppeteer &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; launch


&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;naver_auth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# 인증을 위한 naver 페이지로 이동&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;goto&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://nid.naver.com/nidlogin.login?mode=form&amp;amp;url=https%3A%2F%2Fwww.naver.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  auth_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;naver_id&quot;&lt;/span&gt;
  auth_pw &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;naver_pw&quot;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# naver 인증 페이지에서의 id/pw 입력 필드에 값을 입력한다.(해당 elem의 id값은 변경될 수도 있다.)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; auth_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;delay&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#pw&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; auth_pw&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;delay&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#frmNIDLogin &gt; fieldset &gt; input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# login 후 해당 장치 인증&lt;/span&gt;
  elems_login_and_device_add &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;frmNIDLogin&quot;]/fieldset/span[1]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;elems_login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      login_and_device_add &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elems_login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; login_and_device_add&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
      &lt;span class=&quot;token comment&quot;&gt;# login 상태 유지 않함&lt;/span&gt;
      elems_login_persist &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;xpath&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//*[@id=&quot;login_maintain&quot;]/span[2]/a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
      login_persist &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; elems_login_persist&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; login_persist&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;click&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
  접속을 위한 browser 객체를 만든다. headless 옵션을 False로 하면 리모트용 크롬이 실행되어,
  실제 수행되는 과정을 확인하기 쉽다.
  pyppeteer용 method는 대부분 async/await 처리를 해줘야 한다.
  &apos;&apos;&apos;&lt;/span&gt;
  browser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; launch&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headless&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  page &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; browser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;newPage&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
  &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
  실제 사용자가 쓰는 browser 처럼 브라우저 버전, 상태정보들을 setting 해준다.
  &apos;&apos;&apos;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;setUserAgent&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# waitFor method는 pyppetter를 사용하게 된다면 아주 많이 사용하게 될거다. 1000은 1sec만큼 대기를 한다.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# goto method를 이용해서 원하는 page로의 이동이 가능하다.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;goto&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://www.naver.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;waitFor&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  naver_auth&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;page&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; __name__ &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    asyncio&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_event_loop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run_until_complete&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기까지로 naver에 접속해서 인증하는 부분까지는 pyppeteer 로 구현이 됬다. 이후의 naver cafe에 접근해서 글을 가져오고 저장하는 부분은 다음편에서 다루겠습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;📌내용이 잘못됬거나 변경된 사항이 있다면 코멘트 바랍니다.&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[github와 gatsby로 블로그 운영하기2:기능 추가하기]]></title><description><![CDATA[gatsby를 이용하여 블로그 운영시에 댓글(disqus) 및 배포(netlify)에 대해서 간단히 내용을 추가했습니다.]]></description><link>https://third9.github.io/posts/github와_gatsby로_블로그_운영하기2/</link><guid isPermaLink="false">https://third9.github.io/posts/github와_gatsby로_블로그_운영하기2/</guid><pubDate>Sun, 16 Feb 2020 04:30:53 GMT</pubDate><content:encoded>&lt;h2 id=&quot;intro&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#intro&quot; aria-label=&quot;intro permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;Intro&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;바로 전 내용인 &lt;a href=&quot;https://third9.github.io/posts/github%EC%99%80_gatsby%EB%A1%9C_%EB%B8%94%EB%A1%9C%EA%B7%B8_%EC%9A%B4%EC%98%81%ED%95%98%EA%B8%B0/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;github와 gatsby로 블로그 운영하기&lt;/a&gt;에서 다루었던 내용에 이어서 댓글 기능과 배포에 관련한 내용을 추가합니다.&lt;/p&gt;
&lt;h2 id=&quot;댓글-기능-구현-연동&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8C%93%EA%B8%80-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84-%EC%97%B0%EB%8F%99&quot; aria-label=&quot;댓글 기능 구현 연동 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;댓글 기능 구현 연동&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id=&quot;disqus-소개&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#disqus-%EC%86%8C%EA%B0%9C&quot; aria-label=&quot;disqus 소개 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;#DISQUS &lt;strong&gt;소개&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;블로그를 운영한다면 필수는 아니지만 댓글 기능도 있으면 좋습니다. 대중적으로 많이 사용되는 naver, tistory의 블로그 서비스에서는 이러한 댓글 기능을 기본으로 지원합니다. 하지만 gatsby와 같은 정적 페이지 서비스와 같은 경우는 이러한 기능이 존재하지 않습니다. 이러한 정적 페이지 서비스에서도 댓글 기능을 지원해주는 외부 서비스가 DISQUS입니다.&lt;/p&gt;
&lt;h3 id=&quot;disqus-계정-생성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#disqus-%EA%B3%84%EC%A0%95-%EC%83%9D%EC%84%B1&quot; aria-label=&quot;disqus 계정 생성 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;#DISQUS &lt;strong&gt;계정 생성&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;DISQUS를 사용하기 위해서는 필수적으로 계정을 생성해야 합니다. &lt;a href=&quot;https://disqus.com&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;DISQUS&lt;/a&gt; 사이트로 이동하여, &lt;code class=&quot;language-text&quot;&gt;Get Started&lt;/code&gt; 를 선택하여 새로운 계정을 생성해 줍니다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACCUlEQVQoz11TyY7TQBD1//FFcOfODSSuIHHigsRIcAAGaTQCpGgmMwohM5klcUiceG335l4e5XachZKeXe2qfrU6+rN2uCFICzQgWA9NUAZwdPZoH+G5E789a3JgymO1ycO3FlFQWqtUZK3gnd9d+Hv+Amx+FnTnDJzl6P1tI5BNP8MZdRQo8taEQ/LlLa6fPoHNkpBZK5vLr2CradBVcYvZt2dEIHcEungM5OXtEA1Lw73Iu+56uhhjdPaewpg+Ho5FwZf3nUXVqCfDoIv4FHIzRZ2MYPgaUVeO20elXk5Tj7gE7lOLeeEIHg8FEDNgkgFZssF68Knzzx6JdATNZpDJAFG9HGx7ZKl/JgzleqFxOZfhPV4qTBOFi5nEaEHfYgVlu+Ai+Y0qvoI1DcTyAjy5QcSXw6PJtaUaLaBFBacZrOYQNUMjayhewRiLOp0gH78Lw28kCxWKukS2mlDJvgunk19Q6SjoTHu8Ogde/gRe/3DIaQ686dBKQz3U5Tzohqat6SyVRlEV3dq0wu8+gN197C5QS68eVvh++obKZKGvjtbJHqxUqIUy000Dax3Bkt1t9/DQyW8HJGIsTp4TU9Ubjvat9VNKIs+zgCzLkKbpPsM2Ql5WEELCkK4FNZ9+H0pqSwAcBjfGgHO+A2MMZVnuCVuSiksqwYQmK6UC+ox7st7f+//3tJN/WqyeZqsgTVgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/66dd44343c8cd68f9b78788a8e585200/8ac56/1.webp 240w,
/static/66dd44343c8cd68f9b78788a8e585200/d3be9/1.webp 480w,
/static/66dd44343c8cd68f9b78788a8e585200/e46b2/1.webp 960w,
/static/66dd44343c8cd68f9b78788a8e585200/f992d/1.webp 1440w,
/static/66dd44343c8cd68f9b78788a8e585200/882b9/1.webp 1920w,
/static/66dd44343c8cd68f9b78788a8e585200/129b4/1.webp 2172w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/66dd44343c8cd68f9b78788a8e585200/8ff5a/1.png 240w,
/static/66dd44343c8cd68f9b78788a8e585200/e85cb/1.png 480w,
/static/66dd44343c8cd68f9b78788a8e585200/d9199/1.png 960w,
/static/66dd44343c8cd68f9b78788a8e585200/07a9c/1.png 1440w,
/static/66dd44343c8cd68f9b78788a8e585200/29114/1.png 1920w,
/static/66dd44343c8cd68f9b78788a8e585200/6976b/1.png 2172w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/66dd44343c8cd68f9b78788a8e585200/d9199/1.png&quot;
          alt=&quot;1&quot;
          title=&quot;1&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;계정을 생성할때 &lt;code class=&quot;language-text&quot;&gt;Website URL&lt;/code&gt;에는 서비스하고자 하는 블로그의 주소를 입력하고, &lt;code class=&quot;language-text&quot;&gt;Shortname&lt;/code&gt;에는 DISQUS를 gatsby와 연동할 경우에 사용할 nickname(ID)를 입력합니다. &lt;code class=&quot;language-text&quot;&gt;Shortname&lt;/code&gt; 의 경우에는unique 한 값으로 한번 선택하면 변경할 수 없기에 잘 선택해야 합니다. &lt;/p&gt;
&lt;h3 id=&quot;gatsby에-disqus-연동&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#gatsby%EC%97%90-disqus-%EC%97%B0%EB%8F%99&quot; aria-label=&quot;gatsby에 disqus 연동 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;#&lt;strong&gt;gatsby에&lt;/strong&gt; DISQUS &lt;strong&gt;연동&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;위의 작업까지 완료하였다면, 그 다음 작업은 너무 간단합니다. 물론 이건 gatsby 환경에 &lt;code class=&quot;language-text&quot;&gt;lumen Template&lt;/code&gt;를 적용하였기에 가능한 일입니다. 직접 구현한다면 관련 모듈부터 그 외 디테일한 기능까지 모두 신경을 써야 했을 겁니다.&lt;/p&gt;
&lt;p&gt;gatsby에 DISQUS를 붙이는 방법은 &lt;a href=&quot;https://third9.github.io/posts/github%EC%99%80_gatsby%EB%A1%9C_%EB%B8%94%EB%A1%9C%EA%B7%B8_%EC%9A%B4%EC%98%81%ED%95%98%EA%B8%B0/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;github와 gatsby로 블로그 운영하기&lt;/a&gt;에서 소개했던 &lt;code class=&quot;language-text&quot;&gt;config.js&lt;/code&gt; 파일에 DISQUS의 &lt;code class=&quot;language-text&quot;&gt;Shortname&lt;/code&gt;을 추가하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// config.js&lt;/span&gt;
module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  copyright&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;© All rights reserved.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  disqusShortname&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;MyDISQUS-Shortname&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 비어있던 해당 위치에 Shortname을 입력&lt;/span&gt;
  postsPerPage&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 모습처럼 &lt;code class=&quot;language-text&quot;&gt;config.js&lt;/code&gt; 의 &lt;code class=&quot;language-text&quot;&gt;module.exports&lt;/code&gt; 의 안에 &lt;code class=&quot;language-text&quot;&gt;disqusShortname&lt;/code&gt; 속성에(없다면 만들어서) shortname을 입력하면 자동으로 gatsby에서 반영되어, 작동이 수행됩니다.&lt;/p&gt;
&lt;h2 id=&quot;배포-서비스-연동&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%B0%B0%ED%8F%AC-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%97%B0%EB%8F%99&quot; aria-label=&quot;배포 서비스 연동 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;배포 서비스 연동&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id=&quot;netlify-서비스-소개&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#netlify-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%86%8C%EA%B0%9C&quot; aria-label=&quot;netlify 서비스 소개 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;#&lt;strong&gt;netlify 서비스 소개&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;gatsby를 이용하여 블로그를 운영함에 있어서 배포하는 방법은 여러가지가 있지만, 가장 대표적인 것이 현재 운영중인 github의 page를 이용하는 방식이고 두번째는 최근에 많이 뜨고 있는 netlify라는 서비스를 이용하는 것입니다.
netlify를 이용하면, 빌드 과정을 직접 할 필요 없이 바로 웹 페이지에 배포가 가능합니다.
github의 page를 이용하는경우 &lt;code class=&quot;language-text&quot;&gt;gatsby build&lt;/code&gt; 를 이용하여 build 한 뒤에 branch에 Push해야하는 작업을 직접 진행해야 합니다. 물론 이러한 작업이 번거로워서 보통 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;에 아래와 같이 script를 추가하여 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;# package.json
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ... 중략
  ...
  &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;n/a&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ...중략
    ...
    &lt;span class=&quot;token property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn run clean &amp;amp;&amp;amp; gatsby build --prefix-paths &amp;amp;&amp;amp; gh-pages -d public -b master&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    ...중략
    ...
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  ...중략
  ...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이  &lt;code class=&quot;language-text&quot;&gt;deploy&lt;/code&gt; script 축약어를 만들어 둔 뒤에, &lt;code class=&quot;language-text&quot;&gt;yarn run deploy&lt;/code&gt;를 실행하면 build작업과 github branch에 올리는 작업까지 모두 한번에 수행이 가능합니다. netlify를 이용한다면 이러한 작업들을 직접 할 필요없이, github의 정해진 branch에 push를 함과 동시에 netlify에서 자동으로 build 진행을 수행한 뒤에 정해진 domain에 서비스를 배포해주게 됩니다.&lt;/p&gt;
&lt;h3 id=&quot;netlify의-github-repo-연동&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#netlify%EC%9D%98-github-repo-%EC%97%B0%EB%8F%99&quot; aria-label=&quot;netlify의 github repo 연동 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;#&lt;strong&gt;netlify의 github repo 연동&lt;/strong&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;해당 서비스를 사용하기 위해서는 당연히 회원가입을 해야됩니다. 회원가입 방법 까지는 별도로 여기서 다루지는 않습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;계정을 생성한 뒤에 Sites 화면을 보면 아래와 같은 화면을 취하고 있습니다.(저는 이미 site를 하나 등록해 두었기에 아래와 같이 존재하는 domain이 있습니다.)
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/18c164b5a09eff9f8cd9f9ef42050349/eb645/2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.16666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABVElEQVQoz62QT0sCURTF36ZFOlAQMxOYkhFKtciihPw87SLctQnaW58gKMM/ExQRfYbWYbZqGy50JhoXChO+eTOn+yY1J8ZVPfjx7uWdc7j3sWRuD9mdAjZ2C8hs5ZHJ5aGlM1CXw2jpbCTyTV/JYp28a5vbYAupVSh6EspiCnF56ynMqgnEtCXEVEkCcS2JmXl9Kgpp5kijkJ7tHxRh3NzhvFxBuWrgslonjKAOqBm4ql3/9EO+dXVcVGo4Oj1DsVTC4fEJ2O39A/56Xu13NG0Ljy9NsLZp4anxjLdWCx+2jV6/D845XNcNYXe7aHc6aJsmTMtCr9fHYDCAcMU4mFPPhOfDcRxwMvm+DyFEcEuizujN87xxLaiWeFQzV4iQeLKWk8kpJuHcDcImw0c+GUqB3tS/kcbfgaMNovU0ISeBNEbjh6YIVh2uG4Wg4dgnrfCffAHRB5JNajJGaAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/18c164b5a09eff9f8cd9f9ef42050349/8ac56/2.webp 240w,
/static/18c164b5a09eff9f8cd9f9ef42050349/d3be9/2.webp 480w,
/static/18c164b5a09eff9f8cd9f9ef42050349/e46b2/2.webp 960w,
/static/18c164b5a09eff9f8cd9f9ef42050349/f992d/2.webp 1440w,
/static/18c164b5a09eff9f8cd9f9ef42050349/882b9/2.webp 1920w,
/static/18c164b5a09eff9f8cd9f9ef42050349/bca93/2.webp 2500w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/18c164b5a09eff9f8cd9f9ef42050349/8ff5a/2.png 240w,
/static/18c164b5a09eff9f8cd9f9ef42050349/e85cb/2.png 480w,
/static/18c164b5a09eff9f8cd9f9ef42050349/d9199/2.png 960w,
/static/18c164b5a09eff9f8cd9f9ef42050349/07a9c/2.png 1440w,
/static/18c164b5a09eff9f8cd9f9ef42050349/29114/2.png 1920w,
/static/18c164b5a09eff9f8cd9f9ef42050349/eb645/2.png 2500w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/18c164b5a09eff9f8cd9f9ef42050349/d9199/2.png&quot;
          alt=&quot;2&quot;
          title=&quot;2&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;
위의 화면에서 &lt;code class=&quot;language-text&quot;&gt;New site from Git&lt;/code&gt;을 선택하면 아래와 같이 Wizard 형식으로 연결하고자 하는 Git환경을 선택하고 설정 할 수 있습니다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/78885e625b345d5e305032d8f8531ac6/9b204/3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABdUlEQVQoz5VRy0rDQBTNQuvWSqFVNwURxJU/4daFv+FOREFQ8D+0tY/0IX6CCwv6F4JYbG3Tpm1qm2Qykxznjo6E+sIDZy537txzH2OkNrawkFrFfDKNxFJG2TgTycyvnFtMI7mSRXZ9E8vZNRgHxycw69e4KJSRK5q4NKsoVuooVGrS1pAvV5AvaZrIfcNzmVuqXmF7ZxdG4+4es/A8D0EQgPk+/oO9/UMYN7cN5fg+QyhCWLaNh2YTj61nPLXbGI5GGI/HcCSnrgvGAviMqYKcc0UmfcLR6RmMQF4QoihSlgsBT3bGZAJBSJ/H3lAyxcIw/LzTuRM5mRF+OPrydTJBr9dHr99Hp9OFKx8RSGCWOid6FwAPIxgiVklVmU7RtSwlSHQcR41tDwbKunJsKuLLKaKZZhgXXwVpV5bs0B4MlW21X9TuKK7H1NDjqlzJQMQENWjZ9EG0K7LUzazQT1CCdJCokD/MJWmncVJxilNM/EEa+Q25LcFPwVQPoQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/78885e625b345d5e305032d8f8531ac6/8ac56/3.webp 240w,
/static/78885e625b345d5e305032d8f8531ac6/d3be9/3.webp 480w,
/static/78885e625b345d5e305032d8f8531ac6/e46b2/3.webp 960w,
/static/78885e625b345d5e305032d8f8531ac6/f992d/3.webp 1440w,
/static/78885e625b345d5e305032d8f8531ac6/882b9/3.webp 1920w,
/static/78885e625b345d5e305032d8f8531ac6/3912a/3.webp 2520w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/78885e625b345d5e305032d8f8531ac6/8ff5a/3.png 240w,
/static/78885e625b345d5e305032d8f8531ac6/e85cb/3.png 480w,
/static/78885e625b345d5e305032d8f8531ac6/d9199/3.png 960w,
/static/78885e625b345d5e305032d8f8531ac6/07a9c/3.png 1440w,
/static/78885e625b345d5e305032d8f8531ac6/29114/3.png 1920w,
/static/78885e625b345d5e305032d8f8531ac6/9b204/3.png 2520w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/png&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/78885e625b345d5e305032d8f8531ac6/d9199/3.png&quot;
          alt=&quot;3&quot;
          title=&quot;3&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;자신이 사용하는 Git 저장소를 선택한 뒤에 해당 Git 저장소의 인증을 거친 후 Repo와 branch를 선택하여 설정을 마무리 하면 됩니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;netlify 설정에 대한 부분을 좀더 자세히 알고 싶다면, 해당 블로그의 글을 추천합니다. &lt;a href=&quot;https://blog.outsider.ne.kr/1417&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;netlify로 정적 사이트 배포하기&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;다음에-시간이-된다면&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8B%A4%EC%9D%8C%EC%97%90-%EC%8B%9C%EA%B0%84%EC%9D%B4-%EB%90%9C%EB%8B%A4%EB%A9%B4&quot; aria-label=&quot;다음에 시간이 된다면 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;다음에 시간이 된다면…&lt;/h2&gt;
&lt;p&gt;google analystic 연동과 gatsby의 template 코드를 customize하여 문서에서 Head 목록이 나오게 하는 내용을 추가하겠습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[python3.7에서 Dict가 정렬이 되는 이유]]></title><description><![CDATA[python3.7 부터 dict에 데이터를 입력한 뒤 출력 해보면 항상 정렬을 유지한다. (cpython의 경우에는 3.6에서도 지원이 되었지만, 3.7부터는 정식으로 모두 지원이 되기에 3.7이라고 지칭한다.) python 3.7부터는 어떻게 dict가 입력 순 정렬을 유지하는가?]]></description><link>https://third9.github.io/posts/python3.7에서_Dict가_정렬이_되는_이유/</link><guid isPermaLink="false">https://third9.github.io/posts/python3.7에서_Dict가_정렬이_되는_이유/</guid><pubDate>Sun, 09 Feb 2020 05:02:19 GMT</pubDate><content:encoded>&lt;p&gt;python3.7 부터 dict에 데이터를 입력한 뒤 출력 해보면 항상 정렬을 유지한다. (cpython의 경우에는 3.6에서도 지원이 되었지만, 3.7부터는 정식으로 모두 지원이 되기에 3.7이라고 지칭한다.) 다만 여기서 말하는 정렬은 입력 순 정렬을 말하는 것으로, 실제 데이터의 정렬과는 다르다. 데이터 값의 정확한 정렬을 원한다면, &lt;code class=&quot;language-text&quot;&gt;collection&lt;/code&gt; 모듈의 &lt;code class=&quot;language-text&quot;&gt;OrderDict&lt;/code&gt; 를 사용해야 한다. (여기에 대해서도 StackOverflow에 동일한 답변이 있다.[&lt;a href=&quot;https://stackoverflow.com/questions/39980323/are-dictionaries-ordered-in-python-3-6/39980744#39980744&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Link&lt;/a&gt;])&lt;/p&gt;
&lt;h3 id=&quot;python35와-python37의-비교&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#python35%EC%99%80-python37%EC%9D%98-%EB%B9%84%EA%B5%90&quot; aria-label=&quot;python35와 python37의 비교 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Python3.5와 Python3.7의 비교&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;3.6이 아닌 3.5와 비교하는 이유는 우리가 일반적으로 사용하는 python이 cpyton이다 보니 3.7과의 비교에서 차이가 없다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# version 3.5&lt;/span&gt;
_dict &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;b&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;c&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;f&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Dict result &gt;&gt; {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_dict&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# Dict result &gt;&gt; {&apos;c&apos;: None, &apos;f&apos;: None, &apos;b&apos;: None, &apos;a&apos;: None} &lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; 해당 결과값은 정렬이 되어있지도 않지만&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 호출시마다 달라질 수 있다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# version 3.7&lt;/span&gt;
_dict &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;b&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;c&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;f&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
_dict&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;a&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Dict result &gt;&gt; {}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_dict&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# Dict result &gt;&gt; {&apos;b&apos;: None, &apos;c&apos;: None, &apos;f&apos;: None, &apos;a&apos;: None} &lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; 결과를 보면 입력순으로 정렬이 되어서 나온다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;python-37에서-dict가-정렬이-되는-이유&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#python-37%EC%97%90%EC%84%9C-dict%EA%B0%80-%EC%A0%95%EB%A0%AC%EC%9D%B4-%EB%90%98%EB%8A%94-%EC%9D%B4%EC%9C%A0&quot; aria-label=&quot;python 37에서 dict가 정렬이 되는 이유 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Python 3.7에서 dict가 정렬이 되는 이유&lt;/h3&gt;
&lt;p&gt;그럼 갑자기 3.7 부터 왜 이러한 정렬을 지원하는지 찾아보니, python 웹페이지에 &lt;code class=&quot;language-text&quot;&gt;Compact and ordered dict(issue27350)&lt;/code&gt; [&lt;a href=&quot;https://bugs.python.org/issue27350&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt;] 라는 제목으로 등록된 글을 확인할 수 있다. 해당 issue는 처음 2016.06.19에 처음 등록 되었고 현재는 종료된 issue다. &lt;/p&gt;
&lt;p&gt;여기서 처음 issue를 등록한 사람의 글을 보면 pypy 블로그에 등록된 &lt;code class=&quot;language-text&quot;&gt;faster-more-memory-efficient-and-more&lt;/code&gt;[&lt;a href=&quot;https://morepypy.blogspot.jp/2015/01/faster-more-memory-efficient-and-more.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt;]라는 글을 언급하고 있는데 여기서 힌트를 얻어서 해당 아이디어를 낸 듯 하다. pypy에 언급된 내용에서는 pypy가 dict 정렬 등에 빠르고, 더 많은 메모리 효율의 성과를 낼 수 있었는지를 설명하는 내용이 있는데 이러한 작업이 시작하게 된 계기 또한 &lt;code class=&quot;language-text&quot;&gt;Raymond Hettinger&lt;/code&gt;가 제시한 아이디어[&lt;a href=&quot;https://mail.python.org/pipermail/python-dev/2012-December/123028.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt;]에서 시작되었다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Raymond Hettinger&lt;/code&gt;가 제시한 아이디어는 아래와 같이 기존에 배열 공간 하나로만 관리했던 dict 형태에 인덱스를 관리하는 공간을 하나 더 추가하는 형태로 제시한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt; Raymond Hettinger 가 제시한 생각 &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 입력된 Dict 값&lt;/span&gt;
d &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;timmy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;red&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;barry&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;green&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;guido&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blue&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 기존의 보관 방식&lt;/span&gt;
entries &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8522787127447073495&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;barry&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;green&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9092791511155847987&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;timmy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;red&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;--&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6480567542315338377&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;guido&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blue&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 새로운 보관 방식&lt;/span&gt;
indices &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
entries &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9092791511155847987&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;timmy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;red&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8522787127447073495&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;barry&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;green&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6480567542315338377&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;guido&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blue&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;위와 같은 형태로 변경된 블로그에서 설명하는 이전 dict의 구조와 새로운 dict의 구조&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Original Dict struct&lt;/span&gt;
struct &lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;long&lt;/span&gt; num_items&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    dict_entry&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; items&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; pointer to array &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

struct dict_entry &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    PyObject&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    PyObject&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# New Dict struct&lt;/span&gt;
struct &lt;span class=&quot;token builtin&quot;&gt;dict&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;long&lt;/span&gt; num_items&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 기존에 하나로 존재하던것을 두개의 공간으로 나누었다.&lt;/span&gt;
    variable_int &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;sparse_array&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    dict_entry&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; compact_array&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

struct dict_entry &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token builtin&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    PyObject &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;애초에 dict와 같은 Hash테이블은 속도 적인 부분에서 많은 장점이 있지만, 빠른 속도와 충돌을 방지하기 위해서 희소 배열 형태로 데이터를 보관하여야 했기에 많은 메모리 공간을 차지하고 있어야 했다. &lt;/p&gt;
&lt;p&gt;기존 3.5이전에는 dict 정보가 보관되는 dict&lt;em&gt;entry를 &lt;code class=&quot;language-text&quot;&gt;PyDictKeyEntry 형태(메모리 주소, 키, 값)&lt;/code&gt;의 희소 배열로 저장을 하면서 사용하지 않는 공간에 대해서도 PyDictKeyEntry 형태로 저장되어 불필요한 자원이 소모 되었다면, 3.7부터는 dict&lt;/em&gt;entry에는 순수한 dict 정보만 보관하고, variable_int에 희소 배열 형태로 dict의 index를 저장하도록 변경 되면서 불필요하게 사용되던 메모리 공간을 효율적으로 관리할 수 있도록 수정된 것이다. 그와 함께 dict가 입력 순 정렬로 출력되는데에는 dict의 저장 공간이 list 형태로 변경 되면서 부수적인 효과가 나오게 된 것이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[CRA(create-react-app)에서 민감정보 처리하기]]></title><description><![CDATA[create-react-app을 이용하여 프로젝트를 진행하는 경우에 민감정보를 어떻게 관리하면 좋을지에 대해서 정리한다]]></description><link>https://third9.github.io/posts/CRA(create-react-app)에서_민감정보_처리하기/</link><guid isPermaLink="false">https://third9.github.io/posts/CRA(create-react-app)에서_민감정보_처리하기/</guid><pubDate>Sun, 02 Feb 2020 08:19:03 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;create-react-app을 이용하여 프로젝트를 진행하는 상황에서 민감정보를 관리했던 방법에 대해서 정리한다. 해당 내용은 &lt;code class=&quot;language-text&quot;&gt;create-react-app&lt;/code&gt; 페이지의 &lt;a href=&quot;https://create-react-app.dev/docs/adding-custom-environment-variables/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;adding-custom-environment-variables&lt;/a&gt;문서를 참조하여 정리했다. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;민감 정보라 하면 보통 api의 endpoint 및 api 인증을 위한 token, id/pw와 같은 인증 정보들을 말한다. 보통 작업한 내용들의 경우 git등을 이용하여 코드 관리를 진행하는데, 이 과정에서 git에 민감 정보가 들어가는 경우 보안 위협 요소가 되기에 별도로 분리하여 관리를 한다.&lt;/p&gt;
&lt;p&gt;보통은 환경 변수에 등록하여 사용하거나 INI와 같은 설정 파일로 관리를 하는데 여기서는 별도의 .env 파일로 분리하여 관리하는 방법만 다룬다. 일반 환경파일로 설정하고 싶은 경우는 위의 링크를 참조하면 된다.&lt;/p&gt;
&lt;p&gt;프로젝트의 root 경로에 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일을 생성 한뒤 아래와 유사하게 코드를 작성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;REACT_APP_USERNAME=user_id
REACT_APP_PASSWORD=password&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 코드가 끝이다. 사용하고 싶은 설정 값의 명칭을 위와 같이 추가하여 작성하면 된다. 여기서 주의할 점은 앞에는 항상 &lt;code class=&quot;language-text&quot;&gt;REACT_APP_&lt;/code&gt; 이 붙어야 한다는 것이다. 그래야 CRA에서 정상적인 환경설정 값으로 인지하여 사용이 가능하다.&lt;/p&gt;
&lt;p&gt;해당 값을 가져오는 방법은 별도의 모듈 호출 없이 CRA로 생성된 프로젝트 파일 내에서 공통으로 아래와 같이 작성하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// .env&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REACT_APP_USERNAME&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; password &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REACT_APP_PASSWORD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 방식으로 환경설정 값을 가져와서 사용이 가능하다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; 파일에 들어가는 형식 및 사용 스타일을 봤을때 서비스가 실행되는 시점에서 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt;의 파일을 환경 변수에 등록하여 사용하는 듯 하다.&lt;/p&gt;
&lt;p&gt;여기서 추가적으로 &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt;파일명 뒤에 , &lt;code class=&quot;language-text&quot;&gt;.test, .local, .development&lt;/code&gt; 등의 이름을 붙여서 각 개발 환경에 맞추어 적용하는 방법도 있으니 해당 방식을 원하는 경우 &lt;a href=&quot;https://create-react-app.dev/docs/adding-custom-environment-variables/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;adding-custom-environment-variables&lt;/a&gt;를 참조하자.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Django ORM의 Query-related 정리]]></title><description><![CDATA[Django ORM에서 Query-related를 사용하며, 헷갈리던 부분들에 대한 정리]]></description><link>https://third9.github.io/posts/Django_ORM_Query-related/</link><guid isPermaLink="false">https://third9.github.io/posts/Django_ORM_Query-related/</guid><pubDate>Fri, 27 Dec 2019 08:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;query-related-class&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#query-related-class&quot; aria-label=&quot;query related class permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Query-related class&lt;/h2&gt;
&lt;h3 id=&quot;-intro&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-intro&quot; aria-label=&quot; intro permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&gt; Intro&lt;/h3&gt;
&lt;p&gt;Django에서 ORM을 사용하는데 있어서 보통의(가벼운) SQL 작업에는 큰 문제가 없지만, 여러개의 Table을 join 또는 조건문을 거는 경우에는 일반적으로 사용하던 방식으로 ORM을 사용하면 사용이 어렵거나 복잡해지는 경우가 있다.&lt;/p&gt;
&lt;p&gt;이러한 문제를 조금이라도 Django에서는 Query-related class 가 존재한다. &lt;/p&gt;
&lt;p&gt;여기서 설명할 것은 &lt;code class=&quot;language-text&quot;&gt;F&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Q&lt;/code&gt; 이다. F와 Q는 모두 Django ORM에서 활용되는 method인데 이를 이용하면 SQL문의 캡슐화 및 DB 레벨에서의 사용이 가능하다는 장점이 있다.&lt;/p&gt;
&lt;h3 id=&quot;-f-expressions&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-f-expressions&quot; aria-label=&quot; f expressions permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&gt; F() expressions&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;F()&lt;/code&gt;의 기능은 모델의 Field와 관련한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# F()를 사용하지 않은 일반 field 값의 증가&lt;/span&gt;
model_obj &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;third9&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
model_obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age_field &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
model_obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# F()를 사용한 일반 field 값의 증가&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; F

model_obj &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model_obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;third9&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
model_obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age_field &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; F&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;age_field&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
model_obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;save&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 예시와 같이 사용가능하다. 위의 내용만 보았을때는 &lt;code class=&quot;language-text&quot;&gt;F&lt;/code&gt;를 사용할뿐 실제 결과값이 달라지지는 않는다. 다만 문서에서는 &lt;code class=&quot;language-text&quot;&gt;F&lt;/code&gt;를 이용한 방식은 SQL 구조적으로 되어있다고 하는데, 이부분은 위의 예시에서 &lt;code class=&quot;language-text&quot;&gt;model_obj.age_field&lt;/code&gt; 가 Model 객체에서 해당 필드의 값을 가져와 python 메모리에 저장하여 사용을 한다면, &lt;code class=&quot;language-text&quot;&gt;F(&amp;#39;age_field&amp;#39;)&lt;/code&gt; 는 직접 DB단계에서 작업을 수행한다고 한다. 그러한 이점으로 &lt;/p&gt;
&lt;p&gt;F() 를 사용하는 방식이 python 친화적이면서 동시에 같은 Table의 field를 접근하여 작업 수행시에 발생할 수 있는 DB의 Race condition문제를 손쉽게 회피 할 수 있다고 한다.&lt;/p&gt;
&lt;p&gt;개인적으로는 F() 보다도 Q()를 더 자주 사용하게 되는데 Q()는 일반적인 query문을 간략하게 작성해서 객체로 저장, 참조 할 수 있도록 해준다. Server-side에서 query문을 사용할때 다양한 조건문을 추가하기도 하고, 분기에 따라서 조건을 다르게 하는 경우가 많은데 Q()를 이용하면, ORM에서 보다 깔끔하게 유사한 작업을 할 수 있다.&lt;/p&gt;
&lt;h3 id=&quot;-q-objects&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#-q-objects&quot; aria-label=&quot; q objects permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&gt; Q() objects&lt;/h3&gt;
&lt;p&gt; &lt;code class=&quot;language-text&quot;&gt;Q()&lt;/code&gt; 의 사용은 아래와 같이 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# Q() 사용의 예시&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; django&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Q

Model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 또는 아래&lt;/span&gt;
q1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
q2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
Model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q1 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; q2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 또는 더 아래&lt;/span&gt;
q_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
q_query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OR&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
Model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q_query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot; SQL 문
SELECT * FROM model WHERE id=&apos;value1&apos; OR name=&apos;value2&apos; 
&quot;&quot;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 방식처럼 조건식을 넣을 수가 있다. 위는 Q를 OR로만 표현한 경우이고 AND, NOT 등에 대한 표현도 손쉽게 가능하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 위의 코드에 이어서 &lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# AND&lt;/span&gt;
Model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# NOR&lt;/span&gt;
Model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 위에 나온 방식들을 모두 활용한다면 아래와 같이 사용가능 하다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot; 원하는 SQL 문
SELECT * 
FROM model 
WHERE name=&apos;value1&apos; or (id=&apos;value2&apos; and age &gt; 15)
&quot;&quot;&quot;&lt;/span&gt;

q_query &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
q_query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;value2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age_gt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OR&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

Model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;objects&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q_query&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 F()와 Q()를 잘 활용하면 Django ORM을 사용하는데 있어서 보다 효율적인 사용이 가능하다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Django Rest-framework API에 TestCase작업시 인증방법]]></title><description><![CDATA[Django-Rest-framework를 이용한 API의 TestCase작성시 사용자 인증에 대한 선행작업의 내용입니다.]]></description><link>https://third9.github.io/posts/drf-testcase-인증방법/</link><guid isPermaLink="false">https://third9.github.io/posts/drf-testcase-인증방법/</guid><pubDate>Thu, 26 Dec 2019 09:40:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;intro&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#intro&quot; aria-label=&quot;intro permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Intro&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;여기서는 Django의 User class를 상속하지 않은 상황에서의 Django-Rest-Framework API에 대한 인증 Test에 대해서 다룹니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Django를 이용한 프로젝트에서 API 서비스에 대하여 Test를 진행하려 할때 인증과 관련한 부분이 걸립니다. Unit-Test에서 별도의 인증키를 받는 로직을 구현해서 Test 하여도 되지만 여기서는 다르게 진행합니다.&lt;/p&gt;
&lt;h2 id=&quot;인증방법&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B8%EC%A6%9D%EB%B0%A9%EB%B2%95&quot; aria-label=&quot;인증방법 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;인증방법&lt;/h2&gt;
&lt;p&gt;일반적으로 Django의 User Class를 상속받아서 진행을 하였다면 인증에 큰 문제는 없습니다. DRF(Django-Rest-framework)를 이용하여 개발한 경우 &lt;code class=&quot;language-text&quot;&gt;APIClient&lt;/code&gt; 를 이용하면 되죠.
아래와 같은 방식으로 인증절차를 통과할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 일반적인 User class를 상속한 경우&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;test &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; APIClient

client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; APIClient&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;login&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;user, password=&apos;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;&apos;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다만, Django의 User class를 상속 받지 않은 경우는 &lt;code class=&quot;language-text&quot;&gt;force_authenticate&lt;/code&gt; method를 이용하여 처리 할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 강제로 인증을 위한 &lt;/span&gt;
client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;force_authenticate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 방식을 통해서 강제로 인증절차를 수행할 수 있습니다. 위의 방식으로 인증이 진행되었으면 해당 client 객체를 이용하여, &lt;code class=&quot;language-text&quot;&gt;get, post, put, delete&lt;/code&gt; 등의 API 호출의 진행이 가능하므로 인증 절차 후의 TestCase를 수행 가능합니다.&lt;/p&gt;
&lt;h2 id=&quot;추가사항&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B6%94%EA%B0%80%EC%82%AC%ED%95%AD&quot; aria-label=&quot;추가사항 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;추가사항&lt;/h2&gt;
&lt;p&gt;제가 Test를 진행하던 프로젝트는 기존에 만들어진 프로젝트에 TestCase를 추가하던 상황이었는데 Django 버전이 1.6 이었습니다. Test를 위한 method를 1개만 놓을때는 문제 없었던 부분이 2개 이상을 선언하고 진행하는 경우 &lt;code class=&quot;language-text&quot;&gt;AttributeError: &amp;#39;IntegrityError&amp;#39; object has no attribute &amp;#39;__traceback__&amp;#39;&lt;/code&gt;라는 에러 메시지가 나올 수 있는데 해당 상황의 경우가 Test 당시 &lt;code class=&quot;language-text&quot;&gt;setUp&lt;/code&gt;에서 model object를 생성해주는 작업을 진행하였다면 &lt;code class=&quot;language-text&quot;&gt;tearDown&lt;/code&gt; 시점에서 해당 model 객체를 제거해 주는 작업을 같이 진행해 줘야 합니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[openstack contributor 도전]]></title><description><![CDATA[Openstack을 사용하면서 코드를 내가 수정한 부분을 openstack에 반영 했던것에 대한 정리글입니다.]]></description><link>https://third9.github.io/posts/openstack_contributor_도전/</link><guid isPermaLink="false">https://third9.github.io/posts/openstack_contributor_도전/</guid><pubDate>Sun, 01 Dec 2019 01:18:45 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;오픈스택을 공부하면서 간단한 철자 오류를 수정하고 싶어서 github에 올렸더니 contributor가 되려면 그냥 PR 하는 방법이 아닌 여러가지 단계를 거치기에 직접 시도해 본 내용을 글로 남깁니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;처음에는 일반적인 github 방식대로 Fork 한 뒤에 수정해서 PR을 했더니 PR 글 밑에 아래와 같은 답변을 줬습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Thank you for contributing to openstack/cinder!

openstack/cinder uses Gerrit for code review.

If you have never contributed to OpenStack before make sure you have read the getting started documentation: http://docs.openstack.org/infra/manual/developers.html#getting-started

Otherwise please visit http://docs.openstack.org/infra/manual/developers.html#development-workflow and follow the instructions there to upload your change to Gerrit.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그래서 설명대로 링크를 찾아가 보니, 뭔가 엄청 많고 불친절한 영어의 압박…
내용을 읽어보면 우선 &lt;code class=&quot;language-text&quot;&gt;lunchpad&lt;/code&gt;에 계정을 등록하라고 합니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;contributer 를 위해서는 코드리뷰를 해야 하는데 코드리뷰 시스템에 사용되는 계정이 open id 를 이용하기 때문에 그걸 등록해야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://login.launchpad.net&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;lunchpad 링크&lt;/a&gt;로 이동해서 회원가입을 하고, 회원가입도 했으면 이제 &lt;a href=&quot;https://review.openstack.org/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://review.openstack.org/&lt;/a&gt; 로 이동합니다.
여기 가서 오른쪽 상단을 보면 로그인 할 수 있게 되어있고, &lt;code class=&quot;language-text&quot;&gt;open id&lt;/code&gt; 에 로그인이 된 상태면 손쉽게 로그인이 가능합니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;아래의 순서대로 진행하면 됩니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;로그인 후에 오른쪽 상단의 이름을 선택하면 &lt;code class=&quot;language-text&quot;&gt;setting&lt;/code&gt; 버튼이 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;setting&lt;/code&gt; 화면에서 &lt;code class=&quot;language-text&quot;&gt;profile&lt;/code&gt;탭에 &lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt;을 등록하고, &lt;code class=&quot;language-text&quot;&gt;contact information&lt;/code&gt;은 내 개인정보를 등록하면 됩니다.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ssh public keys&lt;/code&gt;탭으로 이동해서 공용키를 등록하고, 없으면 터미널에서 &lt;code class=&quot;language-text&quot;&gt;ssh-keygen&lt;/code&gt; 을 실행하면 됩니다.
&lt;code class=&quot;language-text&quot;&gt;(*공용키 생성부터 등록까지의 방법도 해당 탭에 &amp;quot;How to Generate an SSH Key&amp;quot; 라는 이름으로 잘 설명되 있습니다.)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Agreements&lt;/code&gt;탭으로 이동해서 개인용 인증 라이센스를 발급 받으면 코드리뷰를 위한 기본 계정 생성 작업은 끝납니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;그 다음 부터는 맨 위에서 나온 getting-started 가이드를 보면서 다시 진행하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; config --global user.name xxxxx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설명 그대로 진행해서 git 전역 환경설정에 이름과 주소를 등록합니다.
여기까지 했으면 이제 &lt;code class=&quot;language-text&quot;&gt;git-review&lt;/code&gt;를 설치합니다, 설치 방법은 자신의 환경 및 선호도에 따라서 다양하게 나와있습니다.
이제 여기 까지 잘 됬는지 확인을 해보죠 아래의 명령어를 터미널에서 입력합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;#shell&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ssh&lt;/span&gt; -p &lt;span class=&quot;token number&quot;&gt;29418&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;@review.openstack.org
&lt;span class=&quot;token comment&quot;&gt;# {username} 위치에는 아까 코드리뷰 등록할때 만든 username을 등록해야 한다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;잘됬으면 Welcome 어쩌구 저쩌구 하는 환영의 메시지가 나옵니다.
그럼 이제 원하는 프로젝트를 골라서 git으로 다운받으면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone ssh://&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;@review.openstack.org:29418/&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;repo project name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;내가 원하는 프로젝트 이름을 입력했는데 안되면 해당 &lt;a href=&quot;https://review.openstack.org/#/admin/projects/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt; 로 들어가서 검색하면 됩니다.
해당 repo를 다운받은 뒤에 디렉토리로 이동해서 아래의 명령어를 입력해 줍니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; review -s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;명령어를 입력하면, 공용키 비밀번호를 입력하라고 나옵니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;에러가 발생한 경우&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; remote &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; gerrit ssh://&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;@review.openstack.org:29418/&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;repo project name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;그 이후에는 아래의 명령어 입력&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; remote update&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;우선 브랜치를 새로 생성하고요 &lt;a href=&quot;https://docs.openstack.org/infra/manual/developers.html#starting-a-change&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크 참조&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; checkout -b &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;브랜치명&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;브랜치 명은 보통 &lt;code class=&quot;language-text&quot;&gt;bp/{내용}&lt;/code&gt; 형태로 하는듯 한데, review 사이트를 가보면 각각 다릅니다, 최대한 링크의 설명대로 맞춰서 작성하죠.
코드를 다 수정했으면 그 이후에는&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; commit -a&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 통해서 수정된 내역을 커밋. 커밋 로그 작성 방식은 위의 링크를 참조합니다.&lt;/p&gt;
&lt;p&gt;커밋을 하였으면 &lt;code class=&quot;language-text&quot;&gt;git show&lt;/code&gt;명령어를 이용하여 커밋이 됬는지 확인 후 &lt;code class=&quot;language-text&quot;&gt;git review&lt;/code&gt;명령어를 실행하면 되는데,
아래와 같은 에러가 나오는 경우가 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;fatal: ICLA contributor agreement requires current contact information.

Please review your contact information:

  https://review.openstack.org/#/settings/contact

fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이런 경우는 openstack review 사이트의 &lt;code class=&quot;language-text&quot;&gt;setting&lt;/code&gt;항목에서 &lt;code class=&quot;language-text&quot;&gt;contact inforamtion&lt;/code&gt; 이 등록되어 있지 않아서, 그런 경우로 해당 경로로 이동해서 간단하게 메일주소와 국가를 입력해서 저장 하면됩니다.
잽싸게 등록하고 아무문제 없이 저장이 된경우 &lt;code class=&quot;language-text&quot;&gt;git review&lt;/code&gt; 명령어를 실행하면…&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;remote: Processing changes: new: 1, refs: 1, done
remote:
remote: New Changes:
remote:   https://review.openstack.org/xxxxxx your commit msg
remote:
To ssh://yourname@review.openstack.org:29418/openstack/cinder
 * [new branch]      HEAD -&amp;gt; refs/publish/master/bp/branch&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 이런저런 review사이트에 등록되었다는 메시지가 나옵니다.(개인내용은 임의로 수정했습니다.)&lt;/p&gt;
&lt;p&gt;하지만 &lt;code class=&quot;language-text&quot;&gt;contact information&lt;/code&gt; 저장에서 &lt;code class=&quot;language-text&quot;&gt;Code Review - Error server error&lt;/code&gt; 에러가 나온다면 해당
&lt;a href=&quot;https://ask.openstack.org/en/question/56720/cannot-store-contact-information-when-updating-info-in-openstack-gerrit/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt;를 참조합니다.
openstack.org 에서 계정이 등록되어있지 않아서 그런 경우로 review 사이트와 동일한 email 주소로 등록을 해줍니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;git review&lt;/code&gt; 실행 후 나온 review사이트 주소로 들어가면 본인이 등록한 review글이 보이고,
처음 등록한 경우에는 reviewers 명단에 &lt;code class=&quot;language-text&quot;&gt;Welcome, new contributor!&lt;/code&gt; 라는 메시지가 나옵니다. &lt;/p&gt;
&lt;p&gt;성공적으로 작동 후 결과가 나오는 데는 시간이 조금 걸립니다. 다시 수정해야 하는 경우.
review시스템에 등록한 상태에서 다른 CI들과 함께 jenkins가 테스트를 한 뒤 승인을 하는데,
테스트에서 실패가 발생하는 경우 코드를 다시 수정해서 올릴 수 있습니다.&lt;/p&gt;
&lt;p&gt;에러가 난 코드를 확인 한 뒤 &lt;code class=&quot;language-text&quot;&gt;git commit -a --amend&lt;/code&gt; 명령어를 이용해서 다시 커밋하고,
&lt;code class=&quot;language-text&quot;&gt;git review&lt;/code&gt; 로 review시스템에 다시 등록하면 됩니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[github와 gatsby로 블로그 운영하기]]></title><description><![CDATA[정적 사이트 생성기인 gatsby를 이용하여 github에 블로그 생성 및 posting 하는법을 다룹니다.]]></description><link>https://third9.github.io/posts/github와_gatsby로_블로그_운영하기/</link><guid isPermaLink="false">https://third9.github.io/posts/github와_gatsby로_블로그_운영하기/</guid><pubDate>Sat, 23 Nov 2019 04:30:53 GMT</pubDate><content:encoded>&lt;h2 id=&quot;intro&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#intro&quot; aria-label=&quot;intro permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;intro&lt;/h2&gt;
&lt;p&gt;이전부터 github으로 블로그를 하기위해서 생각만 하고 있었는데 실제로 실천할때가 되니, react를 이용한 서비스까지 나왔네요. 개인적으로 react를 선호하기에 react 기반의 &lt;code class=&quot;language-text&quot;&gt;gatsby&lt;/code&gt;를 이용하였습니다.&lt;/p&gt;
&lt;p&gt;우선 gatsby를 비롯한 다른 대부분의 정적 사이트 생성기는 node를 기반으로 하기에, 해당 pc 환경에 node.js 및 사용하려는 환경에 맞추어 기본 설치가 필요합니다. 이러한 부분은 여기서는 다루지 않겠습니다.&lt;/p&gt;
&lt;p&gt;저는 mac os 환경에서 진행을 하였고, 기본 환경이 다 이루어져있다는 가정하에 진행을 하겠습니다.&lt;/p&gt;
&lt;p&gt;우선 gatsby의 이용을 위해서는 gatsby-cli의 설치가 필수이며, 추후 작성된 글의 build 및 deploy를 위해서 yarn 패키지를 같이 설치해 주는게 좋습니다. yarn 패키지 서비스 설치에 대해서는 여기서 다루지 않습니다.&lt;/p&gt;
&lt;h2 id=&quot;gatsby-설치&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#gatsby-%EC%84%A4%EC%B9%98&quot; aria-label=&quot;gatsby 설치 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;gatsby 설치&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;gatsby-cli 설치&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g gatsby-cli &lt;span class=&quot;token comment&quot;&gt;# -g 옵션을 주어야 전역으로 설치되어 사용에 불편함이 없습니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또한 다른 정적 사이트 생성기와 마찬가지로 gatsby도 다양한 template을 지원하는데 저는 그중에서 &lt;a href=&quot;https://github.com/alxshelepenok/gatsby-starter-lumen&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;lumen&lt;/a&gt;을 사용하기로 했습니다. lumen 말고도 다양한 template 들이 있으니 확인하고픈 분은 &lt;a href=&quot;https://www.gatsbyjs.org/starters/?v=2&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;여기&lt;/a&gt; 들어가서 확인하시면 됩니다.&lt;/p&gt;
&lt;p&gt;gatsby의 설치가 완료되었다면 이제 gatsby-cli를 이용해서 블로그의 생성 및 서비스가 가능합니다.&lt;/p&gt;
&lt;p&gt;gatsby &lt;code class=&quot;language-text&quot;&gt;new&lt;/code&gt;명령어를 통해서 새로운 블로그의 생성이 가능합니다. 여기서는 위에 말한 &lt;code class=&quot;language-text&quot;&gt;lumen template&lt;/code&gt;을 이용해서 진행하겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# gatsby new [blog-title] [gatsby template url]&lt;/span&gt;
$ gatsby new my-blog https://github.com/alxshelepenok/gatsby-starter-lumen&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치가 정상적으로 되었다면 설치 완료이후에 아래와 같은 내용이 나옵니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;Your new Gatsby site has been successfully bootstrapped. Start developing it by
running:
  $ &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; my-blog
  $ gatsby develop&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 내용대로 &lt;code class=&quot;language-text&quot;&gt;my-blog&lt;/code&gt;폴더로 이동하면 블로그 이용을 위한 기본적인 파일들이 생성되어있습니다. 생성보다는 template url의 내용을 다운로드 받습니다.&lt;/p&gt;
&lt;p&gt;생성되어진 blog 경로로 이동하여, &lt;code class=&quot;language-text&quot;&gt;gatsby develop&lt;/code&gt;을 수행하여 정상적으로 동작한다면 &lt;code class=&quot;language-text&quot;&gt;localhost:8000&lt;/code&gt;에서 기본 template환경의 사이트를 확인 할 수 있으며 들어가보면 수염을 산타처럼 풍성히 기른 아저씨가 있는 blog가 나올겁니다.&lt;/p&gt;
&lt;h2 id=&quot;blog-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#blog-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;blog 설정 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Blog 설정&lt;/h2&gt;
&lt;p&gt;위의 작업까지 정상적으로 진행하였다면 blog 이용에 아무 문제가 없습니다. 기본 상태에서 그대로 블로그 글 작성하고 올리고 하면 됩니다. 다만, 내 블로그는 수염 기른 아저씨의 블로그처럼 보이겠지요…&lt;/p&gt;
&lt;p&gt;내 블로그를 만들고 싶은것이니, 약간의 설정 및 template를 수정해보죠, 위의 글을 순서대로 진행하였다면 현재 &lt;code class=&quot;language-text&quot;&gt;my-blog&lt;/code&gt;폴더 내에 있을겁니다. &lt;/p&gt;
&lt;p&gt;lumen template 환경에서의 블로그 설정 정보들은 대부분 &lt;code class=&quot;language-text&quot;&gt;config.js&lt;/code&gt;파일 내에 있습니다. 여기서 정보를 수정하면 기본적으로 반영이 됩니다. 내용들은 필요에 따라서 아래와 같이 수정해줍니다.&lt;/p&gt;
&lt;p&gt;우선 blog의 기본적인 제목 및 home 링크 등등 필수적인 부분을 수정해 줍니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;config.js 수정&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&apos;use strict&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  url&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;my-blog의 url link&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// home url 주소입니다.&lt;/span&gt;
  pathPrefix&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// root 경로&lt;/span&gt;
  title&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;My Blog&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// blog의 title 입니다.&lt;/span&gt;
  subtitle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;My blog subtitle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// blog의 subtitle에 나오는 정보입니다.&lt;/span&gt;
  copyright&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;© All rights reserved.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 소유권 정보이니 내 blog 라면 그대로 둡시다&lt;/span&gt;
  disqusShortname&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 다음에 설명할게요&lt;/span&gt;
  postsPerPage&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 한 화면에 보여질 post 갯수&lt;/span&gt;
  googleAnalyticsId&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 처음에 값이 들어있는데 지워줍니다. 다음에 설명할게요&lt;/span&gt;
  
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  중략
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  
  &lt;span class=&quot;token comment&quot;&gt;// 여기 아래부터는 home 화면의 좌측에 표시되는 프로필 정보들입니다.&lt;/span&gt;
  author&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;my-blog&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 이름정보입니다.&lt;/span&gt;
    photo&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/photo.jpg&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// profill 이미지 파일명&lt;/span&gt;
    bio&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;by-blog bio&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 프로필 간략 정보&lt;/span&gt;
    contacts&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// home 화면의 좌측 하단에 표시되는 icon들 정보입니다. 빈값으로 두면 화면상에 표시되지 않습니다.&lt;/span&gt;
      email&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;my-blog@email.net&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      facebook&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      telegram&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      twitter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      github&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;my-github-id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      rss&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      vkontakte&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      linkedin&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      instagram&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      line&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      gitlab&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      weibo&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;가장 기본적인 부분들부터 먼저 수정해 줍니다.&lt;/p&gt;
&lt;p&gt;프로필 image를 다른것으로 수정하려면, 원하는 이미지파일의 이름을 photo로 변경한뒤에, &lt;code class=&quot;language-text&quot;&gt;static&lt;/code&gt; 폴더에 추가하면 됩니다. 아니면, 설정파일의 photo의 파일명을 바꿔도 됩니다.&lt;/p&gt;
&lt;p&gt;Blog 사이트에서 보이는 Article, about me, contact me 와 같은 내용들은 &lt;code class=&quot;language-text&quot;&gt;config.js&lt;/code&gt;설정에서 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; 중략 &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

menu&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      label&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Articles&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
      path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      label&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;About me&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/pages/about&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      label&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Contact me&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/pages/contacts&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; 중략 &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 메뉴 정보를 수정하는것으로 변경이 가능합니다. &lt;code class=&quot;language-text&quot;&gt;articles&lt;/code&gt;를 제외한 about, contacts 등의 정보는 &lt;code class=&quot;language-text&quot;&gt;content/pages&lt;/code&gt;위치에 존재합니다. 파일들을 수정하면 내용도 수정이 가능합니다.&lt;/p&gt;
&lt;h2 id=&quot;blog-글쓰기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#blog-%EA%B8%80%EC%93%B0%EA%B8%B0&quot; aria-label=&quot;blog 글쓰기 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Blog 글쓰기&lt;/h2&gt;
&lt;p&gt;blog에 올리고 싶은 글들은 &lt;code class=&quot;language-text&quot;&gt;content/posts&lt;/code&gt;경로에 등록하면 됩니다.  글의 작성은 기존에 example로 존재하는 내용 및 파일명을 참조하여 작성하면 됩니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;기본 양식&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;markdown&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;&lt;span class=&quot;token hr punctuation&quot;&gt;---&lt;/span&gt;
title: 제목 // 제목을 작성합니다. &quot;를 빼고 작성합니다.
date: &quot;YYYY-MM-DD hh:mm:sec&quot; // 시간을 입력하는 일반적인 datetime format으로 작성하며, &quot;로 감싸야 합니다.
template: &quot;post&quot;
draft: false // 해당 타입을 true로 변경하면 blog에 포스팅 되어있지만 글이 보이지 않습니다.
slug: &quot;/posts/제목/&quot; // url link에서 보여질 주소를 나타냅니다.
category: &quot;Develop&quot; // category를 구분합니다.
tags: // 아래에 tag들을 등록합니다.
  &lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; &quot;tag1&quot;
  &lt;span class=&quot;token list punctuation&quot;&gt;-&lt;/span&gt; &quot;tag2&quot;
&lt;span class=&quot;token title important&quot;&gt;description: &quot;목록에서 보일 내용&quot; // 글의 내용이 아닌 home의 목록에서 보여지는 내용입니다.
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;&lt;/span&gt;

이하 post 내용 작성&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 &lt;code class=&quot;language-text&quot;&gt;---&lt;/code&gt;로 싸여진 내용은 필수정보입니다. 빠지면 정상적으로 글이 보이지 않을수도 있고, 해당 정보에서 “를 잘 확인해야 합니다. “로 싸여진 내용이 있고, 그렇지 않은 내용도 있습니다.&lt;/p&gt;
&lt;p&gt;여기까지 진행되었다면, gatsby 글쓰기의 기본적인 부분은 다 되었습니다. 이제 글을 올리기만 하면됩니다.&lt;/p&gt;
&lt;h2 id=&quot;blog-배포&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#blog-%EB%B0%B0%ED%8F%AC&quot; aria-label=&quot;blog 배포 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Blog 배포&lt;/h2&gt;
&lt;p&gt;이제 만들어진 글을 다른사람들도 볼 수있도록 배포해야 하는데 일반적인 github.io를 통하여 올리는 법과 netlify라는 서비스를 이용햇 올리는 방법이 있다. 우선 여기서는 github.io에 올리는 내용을 쓰고, netlify를 이용하는 방법은 따로 올리겠습니다.&lt;/p&gt;
&lt;p&gt;github에 올리려면, 우선 해당 git repo가 만들어져 있어야합니다. github 사이트에 들어가서 새로운 repository를 만들때 명칭을 &lt;code class=&quot;language-text&quot;&gt;[blog-title].github.io&lt;/code&gt;형태로 만들고 아래의 내용을 진행합니다. 다만 github.io 도메인을 사용하여 blog를 사용하려면 해당 파일들이 master 브랜치에 등록되어 있어야 하는 걸로 알고 있습니다. 그래서 블로그 코드 원본을 유지하기 위해서 별도의 branch를 생성했습니다. 명칭은 자유롭게 해도 되는데 여기선 &lt;code class=&quot;language-text&quot;&gt;blog-source&lt;/code&gt;로 했습니다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; init // &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; 환경을 만듭니다.
$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; checkout -b blog-source // blog-source 브랜치 생성
$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; // blog 파일들 추가
$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; commit -m &lt;span class=&quot;token string&quot;&gt;&quot;블로그 처음 셋팅&quot;&lt;/span&gt; // blog 파일들 등록
$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; remote &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; origin https://github.com/&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;my-id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;/&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;blog-title&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;.github.io // posting 하고자 하는 github repo url 등록
$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; push -u origin blog-source // blog-source 브랜치를 원격에도 동일하게 upload&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 작업을 한다고 글이 보이진 않습니다. 단지 내가 쓴 blog 원본 데이터를 보존 하기 위한 거죠,&lt;/p&gt;
&lt;p&gt;이제 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;파일을 수정합니다. 해당 파일은 node.js 를 사용하는 서비스들에 한해서 package 정보 및 실행 명령어를 선언하고 있습니다.&lt;/p&gt;
&lt;p&gt;해당 파일을 열어서 보면 아래와 같은 &lt;code class=&quot;language-text&quot;&gt;script&lt;/code&gt; 쪽 내용이 보일 겁니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&apos;&apos;&apos;중략&apos;&apos;&apos;

&lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;develop&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn run clean &amp;amp;&amp;amp; gatsby develop&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn run clean &amp;amp;&amp;amp; gatsby build&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn run clean &amp;amp;&amp;amp; gatsby build --prefix-paths &amp;amp;&amp;amp; gh-pages -d public&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;clean&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;rimraf .cache public&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;flow&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;flow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;lint:js&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;eslint --cache --ext .js,.jsx .&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;lint:scss&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;stylelint \&quot;src/**/*.scss\&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;lint&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;concurrently \&quot;yarn run lint:js\&quot; \&quot;yarn run lint:scss\&quot; \&quot;yarn flow\&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jest --config ./jest/jest-config.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test:coverage&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jest --coverage --config ./jest/jest-config.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test:watch&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;jest --watch --config ./jest/jest-config.js&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token property&quot;&gt;&quot;repository&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://github.com/[my-id]/[blog-title].github.io&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 본인의 repo 주소로 변경합니다.&lt;/span&gt;

&apos;&apos;&apos;중략&apos;&apos;&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 우리는 &lt;code class=&quot;language-text&quot;&gt;&amp;quot;deploy&amp;quot;: &amp;quot;yarn run clean &amp;amp;&amp;amp; gatsby build --prefix-paths &amp;amp;&amp;amp; gh-pages -d public&amp;quot;,&lt;/code&gt; 내용을 수정합니다. text의 맨뒤에 &lt;code class=&quot;language-text&quot;&gt;-b master&lt;/code&gt;를 붙여서 &lt;code class=&quot;language-text&quot;&gt;&amp;quot;deploy&amp;quot;: &amp;quot;yarn run clean &amp;amp;&amp;amp; gatsby build --prefix-paths &amp;amp;&amp;amp; gh-pages -d public -b master&amp;quot;&lt;/code&gt; 요렇게 바꿉니다.&lt;/p&gt;
&lt;p&gt;그럼 이제 deploy 명령을 수행하면 master 브랜치에 글이 등록됩니다. 글을 등록하기전에 먼저 블로그가 정상적으로 보이는지 확인을 합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; run build &lt;span class=&quot;token comment&quot;&gt;# 정적 사이트로 보일 수 있도록 build 하는 과정&lt;/span&gt;
$ gatsby serve &lt;span class=&quot;token comment&quot;&gt;# local 서버 실행&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;를 통해서 &lt;a href=&quot;localhost:9000&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;localhost:9000&lt;/a&gt; 로 접근하면 확인이 가능합니다. local에서 확인했을때도 아무런 문제가 없다면 이제 실제 사이트에 배포합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run deploy
or
$ &lt;span class=&quot;token function&quot;&gt;yarn&lt;/span&gt; run deploy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 처럼 명령어를 수행하면, gatsby의 build 작업과 함께 해당 github의 master 브랜치에 upload가 되고, &lt;code class=&quot;language-text&quot;&gt;[blog-title].github.io&lt;/code&gt;에 접속하면 블로그가 보이는 걸 확인할 수 있습니다.&lt;/p&gt;
&lt;h2 id=&quot;다음에-다룰-내용들&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8B%A4%EC%9D%8C%EC%97%90-%EB%8B%A4%EB%A3%B0-%EB%82%B4%EC%9A%A9%EB%93%A4&quot; aria-label=&quot;다음에 다룰 내용들 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;다음에 다룰 내용들&lt;/h2&gt;
&lt;p&gt;이렇게 블로그를 등록했지만, 일반 블로그에 비해서 불편한 점들이 몇가지 있는데 그부분을 다음에 작성하는 글에서 다루겠습니다.&lt;/p&gt;
&lt;p&gt;일단 블로그를 만들었는데… 댓글을 달수가 없어요… disqus 라는 서비스를 이용하면 가능합니다. 현재 또는 내 블로그에 사람들이 들어오고는 있는지 알 수 가 없어요… googleAnalystic 을 이용하면 됩니다. 글을 github 말고 다른곳에 좀더 편하게 올릴 수 없나요? netlify라는 서비스를 사용하면됩니다. 모두 다음에 관련 내용을 등록하겠습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Python으로 SSL 인증서 정보 추출 및 검증]]></title><description><![CDATA[Python의 cryptography와 OpenSSL 모듈을 이용하여 SSL 인증서의 정보 추출 및 활용.]]></description><link>https://third9.github.io/posts/Python으로_SSL_인증서_정보 추출 및 검증/</link><guid isPermaLink="false">https://third9.github.io/posts/Python으로_SSL_인증서_정보 추출 및 검증/</guid><pubDate>Tue, 12 Nov 2019 08:12:20 GMT</pubDate><content:encoded>&lt;h2 id=&quot;cryptography-를-이용한-인증서-정보-추출&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#cryptography-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%A0%95%EB%B3%B4-%EC%B6%94%EC%B6%9C&quot; aria-label=&quot;cryptography 를 이용한 인증서 정보 추출 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href=&quot;https://cryptography.io/en/latest/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Cryptography&lt;/a&gt; 를 이용한 인증서 정보 추출&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Cryptography 모듈을 호출하여 인증서 내용을 불러오는 것으로 시작한다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;아래의 load&lt;em&gt;pem&lt;/em&gt;x509_certificate()를 통해서 인증서의 정보를 가져올 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; x509
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hazmat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;backends &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; default_backend

cert_pem &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;인증서의 내용&quot;&lt;/span&gt;
cert &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; x509&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load_pem_x509_certificate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cert_pem&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; default_backend&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인증서 Version 확인&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 위의 코드에서부터 연결되어 내려온다.&lt;/span&gt;
cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;version&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인증서 Fingerprint&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hazmat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;primitives &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; hashes

&lt;span class=&quot;token comment&quot;&gt;# 암호화 타입에 따라서 fingerprint의 정보는 달라짐., &lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# browser에서 인증서 정보를 보면 fingerprint의 암호화 타입도 같이 확인이 됨 &lt;/span&gt;
fingerprint &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fingerprint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hashes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SHA1&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
fingerprint &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fingerprint&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;encode&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;hex&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;serial_number&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 인증서의 serial number 를 가져온다&lt;/span&gt;
cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serial_number

&lt;span class=&quot;token comment&quot;&gt;# 단, browser에서 표시되는 인증서 정보에서의 값과 유사하게 만들어 주기 위해서는 아래의 추가 작업이 필요하다.&lt;/span&gt;
serial &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;hex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serial_number&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
serial &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serial&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rstrip&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;L&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lstrip&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;0x&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
serial &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serial&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zfill&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;34&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
serial_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;serial&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;s&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; s &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;serial&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인증서 등록일자&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;not_valid_before&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인증서 만료일자&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;not_valid_after&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인증서의 도메인 추출&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x509&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; NameOID

cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;subject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_attributes_for_oid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;NameOID&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;COMMON_NAME&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인증서 발급기관 추출&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x509&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;oid &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; NameOID


cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;issuer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_attributes_for_oid&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;NameOID&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;COMMON_NAME&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;public key 추출&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hazmat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;primitives &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serialization

&lt;span class=&quot;token comment&quot;&gt;# 인증키를 통해서 public-key를 추출한다.&lt;/span&gt;
public_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;public_key&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
pem &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; public_key&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;public_bytes&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	encoding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;serialization&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Encoding&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PEM&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token builtin&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;serialization&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PublicFormat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SubjectPublicKeyInfo
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Private key 인증서를 가져오는 방법&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hazmat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;backends &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; default_backend
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; cryptography&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hazmat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;primitives &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; serialization


private_key_pem &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;개인 키 내용&quot;&lt;/span&gt;
private_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; serialization&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load_pem_private_key&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	private_key_pem&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	backend&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;default_backend&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;openssl-모듈을-이용한-인증서-검증&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#openssl-%EB%AA%A8%EB%93%88%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EA%B2%80%EC%A6%9D&quot; aria-label=&quot;openssl 모듈을 이용한 인증서 검증 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;OpenSSL 모듈을 이용한 인증서 검증&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;OpenSSL 모듈을 이용하여 인증서와 개인키의 유효성 검증 및 체인 키와 인증서의 유효성 검증을 진행한다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;기본적인 모듈 호춢 및 인증서들에 대한 변수선언을 아래와 같이 해준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; OpenSSL

certificate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;인증서 내용&quot;&lt;/span&gt;
private_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;개인 키 내용&quot;&lt;/span&gt;
chain_auth_key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;체인키 내용&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;인증서와 개인 키간의 검증 과정&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 개인키와 인증서를 OpenSSL의 객체로 생성&lt;/span&gt;
pk_obj &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load_privatekey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FILETYPE_PEM&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; private_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
cert_obj &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load_certificate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FILETYPE_PEM&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; certificate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Context 객체에 인증키와 개인키를 입력 한 후 check&lt;/span&gt;
context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Context&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TLSv1_METHOD&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;use_privatekey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pk_obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;use_certificate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cert_obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 인증서와 개인키가 서로 유효한 경우 error 발생하지 않음&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;check_privatekey&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Error &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;do not match&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;일부 인증서의 경우 인증서를 발급받은 기관에 따라서 올바르지 않은 인증서라고 나오는 경우가 있는데, 이러한 문제를 해결하기 위해서 &lt;code class=&quot;language-text&quot;&gt;체인 인증서&lt;/code&gt;를 추가로 등록한다.
아래의 경우는 그 &lt;code class=&quot;language-text&quot;&gt;체인 인증서&lt;/code&gt;가 올바른지 인증하기 위한 검토 logic 이다.
해당 내용은 해당 &lt;a href=&quot;https://stackoverflow.com/a/46554359/4443380&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt;를 참조하였다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;인증서와 Chain Key간의 검증&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; re

&lt;span class=&quot;token comment&quot;&gt;# Chain Key의 경우 여러개의 인증서 내용이 연달아 있으므로 인증서들의 유효성 및 List 형태로 분리을 위한 &lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# regular expression을 이용하여 처리&lt;/span&gt;
PEM_RE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;b&apos;-----BEGIN CERTIFICATE-----\r?.+?\r?-----END CERTIFICATE-----\r?\n?&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DOTALL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Chain Key에서 인증서내용들을 List 타입으로 분리&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parse_chain&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chain&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; c &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; PEM_RE&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;finditer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chain&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

store &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;X509Store&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;# 분리한 key 값들을 store에 저장.&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;# store에 인증서 등록시에 인증서의 방식(type, encode)이 잘못된 경우 error 발생&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; cr &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; parse_chain&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chain_auth_key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	  store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add_cert&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load_certificate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FILETYPE_PEM&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cr&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Error &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Encode Type Error&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# store에 등록된 인증서들과 certificate를 비교하기 위한 context 객체 생성&lt;/span&gt;
context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;X509StoreContext&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cert_obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;# verify_certificate method를 이용하여 유효성 검증&lt;/span&gt;
	context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;verify_certificate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; OpenSSL&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crypto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;X509StoreContextError &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;unable to get local issuer certificate&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[DRF(Django-Rest-Framework)를 이용한 pagination/search 기능 구현]]></title><description><![CDATA[django-rest-framework를 이용하여 pagination/Search 기능을 구현하는 법을 설명.]]></description><link>https://third9.github.io/posts/DRF(Django-Rest-Framework)를_이용한_pagination/search_기능_구현/</link><guid isPermaLink="false">https://third9.github.io/posts/DRF(Django-Rest-Framework)를_이용한_pagination/search_기능_구현/</guid><pubDate>Mon, 11 Nov 2019 10:30:33 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;django-rest-framework를 이용하여 pagination/Search 기능을 구현하는 법을 설명., 모듈의 설치와 관련한 사항은 여기서 언급하지 않는다.&lt;/p&gt;
&lt;p&gt;설명을 위한 drf의 버전은 3.2.5 이며, pagination 기능이 drf 3.1 이상부터 추가되었으므로 그 이상읠 버전을 사용해야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;pagination-구현&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#pagination-%EA%B5%AC%ED%98%84&quot; aria-label=&quot;pagination 구현 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Pagination 구현&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;pagination은 일반적으로 많이 보이는 List 형태의 View에서 많이 사용된다.  &lt;code class=&quot;language-text&quot;&gt;이전페이지&lt;/code&gt;,&lt;code class=&quot;language-text&quot;&gt;다음페이지&lt;/code&gt; 등과 같은 기능을 구현 하는데 직접 구현도 가능하지만 drf의 pagination 기능을 사용하면 손쉽게 처리가 가능하다.&lt;/p&gt;
&lt;p&gt;보통 RestAPI &lt;code class=&quot;language-text&quot;&gt;query-param&lt;/code&gt;에 &lt;code class=&quot;language-text&quot;&gt;?page_size=1&lt;/code&gt; 과 같은 형태로 넘겨진다. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;drf의 pagination 구현은 &lt;code class=&quot;language-text&quot;&gt;django&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt; 파일을 수정하는 방식과 별도의 class를 만들어서 구현하는 방식이 있다. &lt;code class=&quot;language-text&quot;&gt;settings&lt;/code&gt;를 수정하면 기존의 다른 class 들에 별다른 작업없이 pagination읠 기능 구현 가능 및 해당 drf를 사용중인 RestAPI 전체에 pagination 기능을 구현 할 수 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;settings.py 를 이용한 pagination 적용&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;REST_FRAMEWORK &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;DEFAULT_PAGINATION_CLASS&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;rest_framework.pagination.LimitOffsetPagination&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;PAGE_SIZE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;전체 API가 아닌 원하는 Class에만 pagination 기능을 구축하려 한다면 아래와 같이 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# ./api/v1/paginations.py&lt;/span&gt;
&lt;span class=&quot;token triple-quoted-string string&quot;&gt;&apos;&apos;&apos;
별도의 모듈로 분리하지 않아도 된다.
&apos;&apos;&apos;&lt;/span&gt; 

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pagination &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PageNumberPagination

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StandardResultsSetPagination&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PageNumberPagination&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# page_size를 None으로 할경우 param에서 page_size를 넘기지 않으면 전체 데이터를 가져온다.&lt;/span&gt;
    page_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;
    page_size_query_param &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pagesize&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 자기가 원하는 param&lt;/span&gt;
    max_page_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotStandardResultsSetPagination&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;PageNumberPagination&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    page_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;
    page_size_query_param &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;page&apos;&lt;/span&gt;
    max_page_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;위와 같이 pagination 스타일을 분리하여 필요에 맞는 스타일을 가져와서 활용이 가능하다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;특정 api class 에만 pagination 구현&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# ./api/v1/views.py&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; viewsets
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; paginations &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; StandardResultsSetPagination&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; NotStandardResultsSetPagination

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StandardViewSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;viewsets&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
  pagination_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; StandardResultsSetPagination
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
  
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotStandardViewSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;viewsets&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ModelViewSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
  pagination_class &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; NotStandardResultsSetPagination
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 형태로 각 API class 별로 원하는 pagination 스타일을 구현 할 수 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;전체 api class에 pagination 구현&lt;/p&gt;
&lt;p&gt;전체 API에 구현하기 위해서는 앞서 나온 내용처럼 &lt;code class=&quot;language-text&quot;&gt;settings.py&lt;/code&gt;를 수정하여야 하며 &lt;code class=&quot;language-text&quot;&gt;paginations.py&lt;/code&gt; 스타일을 가져와 사용하기 위해서는 아래와 같이 한다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# settings.py&lt;/span&gt;
REST_FRAMEWORK &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;DEFAULT_PAGINATION_CLASS&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;api.v1.paginations.StandardResultsSetPagination&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 처럼 코드를 작성하면 별다른 작업없이 pagination 기능의 구현이 가능하다.&lt;/p&gt;
&lt;p&gt;추가로 무한 스크롤과 같은 형태의 구현을 원한다면 &lt;code class=&quot;language-text&quot;&gt;CursorPagination&lt;/code&gt; 모듈을 이용하여 아래와 같은 구현이 가능하다. 방식은 앞서 나온 pagination 방식과 동일 하며  &lt;code class=&quot;language-text&quot;&gt;PageNumberPagination&lt;/code&gt;모듈을  &lt;code class=&quot;language-text&quot;&gt;CursorPagination&lt;/code&gt;모듈로 변경하면 된다. cursor는 page 방식처럼 어느 위치의 데이터인지 사용자 입장에서 알지 못하게 하거나 알 필요가 없을때 유용하다. cursor 방식과 page 방식의 차이는 데이터를 가져오는 기준의 값이 page가 아닌 cursor(id) 방식이라 것에 차이가 있다. 또한 cursor는 &lt;code class=&quot;language-text&quot;&gt;page_size_query_param&lt;/code&gt;가 아닌 &lt;code class=&quot;language-text&quot;&gt;cursor_query_param&lt;/code&gt;을 속성 값으로 가진다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# CursorPagenagtion&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; rest_framework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pagenation &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CursorPagination

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StandardCursorPagination&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CursorPagination&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    page_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# page의 cursor를 구분하기 위해선 model의 unique한 field를 필요로 한다.&lt;/span&gt;
    cursor_query_param &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# 정렬 순서를 특정 필드를 선택하여 정할 수 있다.&lt;/span&gt;
    ordering &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;-log_date&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Sentry server 설치]]></title><description><![CDATA[Error tracking과 Log 관리등을 원격으로 관리할 수 있게 해주는 모니터링 서비스 Sentry를 직접 설치 및 운영한다.]]></description><link>https://third9.github.io/posts/sentry_server_설치/</link><guid isPermaLink="false">https://third9.github.io/posts/sentry_server_설치/</guid><pubDate>Mon, 11 Nov 2019 10:27:46 GMT</pubDate><content:encoded>&lt;h2 id=&quot;sentry&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#sentry&quot; aria-label=&quot;sentry permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sentry&lt;/h2&gt;
&lt;p&gt;Error tracking과 Log 관리등을 원격으로 관리할 수 있게 해주는 모니터링 Server&lt;/p&gt;
&lt;h2 id=&quot;sentry-서버-설치&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#sentry-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%B9%98&quot; aria-label=&quot;sentry 서버 설치 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sentry 서버 설치&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu:14.04&lt;/li&gt;
&lt;li&gt;python:2.7&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;설치를 위한 기본 환경은 위와 같으며 sentry 설치 전 몇가지 setting을 해주어야 한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;sentry 의 원할한 설치 및 구동을 위해서 sentry라는 명칭의 계정을 생성한다&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 해당 명령어 실행 후 나오는 입력 내용을 순차적으로 입력한다.(Id, password, name 등등)&lt;/span&gt;
$ adduser sentry&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;sentry 설치를 위한 모듈들 설치&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -y python-pip&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	python-setuptools&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	python-dev&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    libxslt1-dev&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    gcc&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
    libffi-dev&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	libjpeg-dev&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	libxml2-dev&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	libxslt-dev&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	libyaml-dev&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	libpq-dev
	&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;위의 작업까지 마무리 하였다면 다음으로 worker의 역할과 issue 보관을 위한 redis와 postgresql을 설치해야 한다. worker의 역할은 rabbitMQ도 사용 가능하지만 여기서는 redis를 사용한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;--sentry-연동을-위한-postgresql-설치-및-셋팅-postgresql94&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#--sentry-%EC%97%B0%EB%8F%99%EC%9D%84-%EC%9C%84%ED%95%9C-postgresql-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%85%8B%ED%8C%85-postgresql94&quot; aria-label=&quot;  sentry 연동을 위한 postgresql 설치 및 셋팅 postgresql94 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;- Sentry 연동을 위한 PostgreSQL 설치 및 셋팅 (PostgreSQL:9.4)&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;PostgreSQL은 12.04, 14.04, 16.04 버전의 경우는 ubuntu의 apt repo를 통한 설치를 정상적으로 지원한다.&lt;/p&gt;
&lt;p&gt;또한, 버전에 따라서 설치에 조금씩의 차이가 있는데 해당 방법은 &lt;a href=&quot;https://www.postgresql.org/download/linux/ubuntu/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt;를 통해서 안내한다. 여기서는 14.04 버전을 기준으로 안내한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;PostgreSQL 설치&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 우선 pgdg list를 만든다. (이미 존재하는 경우 파일 생성없이 내용만 추가)&lt;/span&gt;
$ &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; /etc/apt/sources.list.d/
$ &lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; pgdg.list

&lt;span class=&quot;token comment&quot;&gt;# pgdg.list 파일 생성 후 해당 파일내에 아래의 내용을 추가 후 저장한다.&lt;/span&gt;
deb http://apt.postgresql.org/pub/repos/apt/ trusty-pgdg main

&lt;span class=&quot;token comment&quot;&gt;# 이후에 아래의 명령어를 수행한다.&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;wget&lt;/span&gt; --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; apt-key &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; -
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; update

&lt;span class=&quot;token comment&quot;&gt;# 위의 작업까지 완료하였다면 아래의 명령어로 postgresql을 설치한다.&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; postgresql-9.4&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PostgreSQL 셋팅 ( PostgreSQL 명령어 &lt;a href=&quot;https://www.postgresql.org/docs/current/static/sql-commands.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# postgresql 관리자 계정이 정상적으로 생성되어 있는지를 확인한다.&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /etc/password &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;postgres&apos;&lt;/span&gt; 

&lt;span class=&quot;token comment&quot;&gt;# PostgreSQL 작동여부 체크&lt;/span&gt;
$ /etc/init.d/postgresql status

&lt;span class=&quot;token comment&quot;&gt;# 작동중이지 않다면 start 명령을 이용하여 작동시켜준다.(이미 동작중이면 실행하지 않아도 된다.)&lt;/span&gt;
$ /etc/init.d/postgresql start

&lt;span class=&quot;token comment&quot;&gt;## 관리자 계정의 password 변경 및 sentry 계정 생성을 위해서 psql에 접근&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 관리자 계정 postgres로 접근&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; -u postgres psql template1

&lt;span class=&quot;token comment&quot;&gt;# password 변경&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;template1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;# ALTER USER postgres with encrypted password &apos;패스워드&apos;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# sentry 계정 추가 및 LOGIN 권한 부여 (Password는 위에서 postgres 계정에 부여 하듯이 하면 된다.)&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;template1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;# CREATE ROLE sentry WITH LOGIN;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 계정 추가 후 해당 계정에 권한을 추가한다. (sentry 실행시 관련 db등을 생성하기에 sentry 계정 사용시 권한이 있어야 한다.)&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;template1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;# ALTER ROLE sentry WITH CREATEDB CREATEROLE;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 데이터 베이스 권한 부여&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;template1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;# GRANT ALL ON DATABASE databasename TO username;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 작업을 모두 마치면 정상적으로 접근 가능한지 Test., 두개의 계정모두 접속 가능한지 test 한다.&lt;/span&gt;
$ psql -h &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1 -U postgres template1 
$ psql -h &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1 -U sentry template1 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;--redis-설치-및-셋팅-redis329&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#--redis-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%85%8B%ED%8C%85-redis329&quot; aria-label=&quot;  redis 설치 및 셋팅 redis329 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;- Redis 설치 및 셋팅 (Redis:3.2.9)&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Redis의 설치 및 셋팅은 다른 문서(링크)로 대체한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;--sentry-서버-설치-및-셋팅-sentry8180&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#--sentry-%EC%84%9C%EB%B2%84-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%85%8B%ED%8C%85-sentry8180&quot; aria-label=&quot;  sentry 서버 설치 및 셋팅 sentry8180 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;- Sentry 서버 설치 및 셋팅 (Sentry:8.18.0)&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;sentry는 python기반의 서버이므로 virtualenv를 먼저 설치 한 뒤 가상환경을 셋팅한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# virtualenv install &lt;/span&gt;
$ pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -U virtualenv

&lt;span class=&quot;token comment&quot;&gt;# virtualenv setting&lt;/span&gt;
$ virtualenv ~/.venv/sentry

&lt;span class=&quot;token comment&quot;&gt;# virtualenv activate&lt;/span&gt;
$ &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; ~/.venv/sentry/bin/activate

&lt;span class=&quot;token comment&quot;&gt;# sentry 설치&lt;/span&gt;
$ pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -U sentry&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 위의 작업까지 성공적으로 이어졌다면 sentry 서버 구동을 위한 설정 및 실행을 하면 된다. 하지만 정상적으로 구동하지 않고 에러가 출력되면 그에 대응하는 작업을 수행해야 한다.  에러 메시지는 사용자의 상황마다 다르므로 여기서는 2개 정도의 에러에 대해서만 간략히 설명한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;E1: ValueError: jpeg is required unless explicitly disabled using —disable-jpeg, aborting&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt-get install libjpeg-dev zlib1g-dev&lt;/code&gt; 수행., 관련 모듈 설치&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;E2: error: command ‘x86_64-linux-gnu-gcc’ failed with exit status 1&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt-get install libssl-dev libffi-dev&lt;/code&gt; 수행., 관련 모듈 설치&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;sentry설치를 마쳤다면, sentry 설정을 진행한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# init 파일 생성(기본 생성 위치는 &apos;~/.sentry&apos; 이다)&lt;/span&gt;
$ sentry init &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;경로 위치&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
ex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; sentry init or sentry init /etc/sentry&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;  위의 명령어 실행 후 해당 위치에 생성된 sentry.conf.py 파일을 수정&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# ~/.sentry/sentry.conf.py&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# for more information on DATABASES, see the Django configuration at:&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# https://docs.djangoproject.com/en/1.6/ref/databases/&lt;/span&gt;
DATABASES &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;default&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;ENGINE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sentry.db.postgres&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;NAME&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sentry&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;USER&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;sentry&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# postgresql에 등록한 계정으로 입력&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;PASSWORD&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;postgresql 계정 password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;HOST&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# local인 경우 127.0.0.1&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;PORT&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# postgresql의 port&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Redis의 경우 기본 설정을 그대로 사용한다면 별도로 수정할 부분은 없다&lt;/p&gt;
&lt;p&gt;mail발송을 위한 설정을 할 수 있지만 여기서는 다루지 않는다(메일서버는 sendmail을 이용하는 것이 일반적이다)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;모든 설정을 마무리 하였으면 순차적으로 명령어를 실행하여 migration 작업을 수행한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# sentry migration&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# DB 생성에 있어서 여기서는 sentry 라는 명칭을 사용한다.&lt;/span&gt;
$ createdb -E utf-8 sentry

&lt;span class=&quot;token comment&quot;&gt;# 아래의 명령을 수행하면 postgresql/redis에 sentry 관련 데이터를 생성하며, sentry 계정을 만들수 있다.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 이때에 superuser를 만들지 여부를 물어보는데 여기서 만들어야지 이후에 다시 만드는 작업을 하지 않아도 된다.&lt;/span&gt;
$ sentry upgrade

&lt;span class=&quot;token comment&quot;&gt;# 추가로 user를 만들생각이면 아래의 명령어로 만들어 주어도 된다.&lt;/span&gt;
$ sentry createuser&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;migration 까지 마무리 하였다면, 서버를 실행한다. &lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# sentry의 web 서버&lt;/span&gt;
$ sentry run web

&lt;span class=&quot;token comment&quot;&gt;# sentry의 worker&lt;/span&gt;
$ sentry run worker

&lt;span class=&quot;token comment&quot;&gt;# sentry의 cron process&lt;/span&gt;
$ sentry run &lt;span class=&quot;token function&quot;&gt;cron&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 위와 같이 3개의 서비스를 실행시켜야 정상적인 수행이 가능하다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.sentry.io/server/installation/python/#setup-a-reverse-proxy&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;nginx 를 이용한 proxy 서버 연동&lt;/a&gt; 및 &lt;a href=&quot;https://docs.sentry.io/server/installation/python/#enabling-ssl&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;SSL 인증&lt;/a&gt;에 대해서는 여기서 다루지 않고 링크를 참조한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;--daemon으로-실행&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#--daemon%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89&quot; aria-label=&quot;  daemon으로 실행 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;- Daemon으로 실행&lt;/h3&gt;
&lt;p&gt;위의 단계를 모두 진행하였으면 sentry 서버를 실행하고 사용하는데는 문제가 없지만, daemon 형태로 서비스를 수행하기 위해서는 systemd, upstart와 같은 프로그램을 이용해서 안정적으로 사용이 가능하다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; 추가적으로 ubuntu 15부터 systemd를 지원하며, LTS 버전으로 한정할 경우 16버전부터 지원을 한다.&lt;/p&gt;
&lt;p&gt;문서에서 설명한 ubuntu 14에서는 upstart를 사용하므로 upstart 스크립트 작성 및 사용법을 기술한다.&lt;/p&gt;
&lt;p&gt;systemd를 이용하여 서비스하는 방법은 &lt;a href=&quot;https://docs.sentry.io/server/installation/python/#running-sentry-as-a-service&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;링크&lt;/a&gt; 참조.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;upstart를 이용하여 daemon을 구동할 경우, 시스템 부팅시의 자동 실행 및 서비스 종료시 자동 재시작 로그파일 기록 등등의 장점이 있다. 우선은 아래의 script를 작성하여야 한다. (예시에서는 web만을 작성하였지만 실제로는 worker, cron 등에 대한 script도 만들어야 한다.)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# upstart에서 수행되는 서비스들의 script는 /etc/init/ 경로에 ***.conf 파일의 형태로 작성해줘야 한다.&lt;/span&gt;
$ &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; /etc/init/
$ &lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; sentry-web.conf

&lt;span class=&quot;token comment&quot;&gt;# 위에서 생성한 sentry-web.conf 파일을 열어서 script 내용을 등록한다.&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;vim&lt;/span&gt; sentry-web.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 작업까지 수행하였다면 아래의 코드를 위에서 만들어둔 &lt;code class=&quot;language-text&quot;&gt;sentry-web.conf&lt;/code&gt; 파일에 작성한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# /etc/init/sentry-web.conf&lt;/span&gt;
start on runlevel &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2346&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
stop on runlevel &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;016&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 서비스가 오류로 종료시에 자동 재시작&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# (단, 너무 빨리 재시작 되는것에 대한 제한을 수정. 5초 동안 4번 재시작 되면 재시작 하지 않음)&lt;/span&gt;
respawn limit &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;USER&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;www-data
&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;PATH&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;PWD&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr/local/lib/python2.7/dist-packages

&lt;span class=&quot;token comment&quot;&gt;# script가 수행되기 전 해당 서비스의 log 생성 및 권한 부여&lt;/span&gt;
pre-start script
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; -f /var/log/sentry-web.log &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; /var/log/sentry-web.log
    &lt;span class=&quot;token function&quot;&gt;chown&lt;/span&gt; -f &lt;span class=&quot;token environment constant&quot;&gt;$USER&lt;/span&gt; /var/log/sentry-web.log
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
end script

&lt;span class=&quot;token comment&quot;&gt;# 서비스 수행을 위한 main script&lt;/span&gt;
script
&lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; /home/sentry/activate  &lt;span class=&quot;token comment&quot;&gt;# venv 실행&lt;/span&gt;
start-stop-daemon --start &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;# daemon으로 수행&lt;/span&gt;
  --make-pidfile --pidfile /var/run/sentry-web.pid &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# proccess id 파일&lt;/span&gt;
  --chuid &lt;span class=&quot;token environment constant&quot;&gt;$USER&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --chdir &lt;span class=&quot;token environment constant&quot;&gt;$PWD&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --exec /home/sentry/.venv/sentry/local/bin/sentry&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        --config&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/home/sentry/.sentry/&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# sentry 수행을 위한 환경설정파일&lt;/span&gt;
        run web &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; /var/log/sentry-web.log &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# web 서비스 수행 및 log stdout/stderr 로그 등록&lt;/span&gt;
end script

&lt;span class=&quot;token comment&quot;&gt;# 서비스 종료시에 process id 삭제&lt;/span&gt;
post-stop script
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; -f /var/run/sentry-web.pid &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; /var/run/sentry-web.pid
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
end script&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 작성 완료 후  &lt;code class=&quot;language-text&quot;&gt;sudo start sentry-web&lt;/code&gt;  명령어를 실행하면 web이 daemon 으로 수행된다. worker, cron도 위와 같이 script를 작성한 뒤에 실행시켜주면 해당 서비스를 수행할 수 있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;나머지 worker, cron에 관련한 script&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# /etc/init/sentry-worker.conf&lt;/span&gt;
start on runlevel &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2345&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
stop on runlevel &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;016&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

respawn limit &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;USER&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;www-data
&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;PATH&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;PWD&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr/local/lib/python2.7/dist-packages

pre-start script
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; -f /var/log/sentry-web.log &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; /var/log/sentry-worker.log
    &lt;span class=&quot;token function&quot;&gt;chown&lt;/span&gt; -f &lt;span class=&quot;token environment constant&quot;&gt;$USER&lt;/span&gt; /var/log/sentry-worker.log
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
end script

script
&lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; /home/sentry/activate
start-stop-daemon --start &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --make-pidfile --pidfile /var/run/sentry-worker.pid &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --chuid &lt;span class=&quot;token environment constant&quot;&gt;$USER&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --chdir &lt;span class=&quot;token environment constant&quot;&gt;$PWD&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --exec /home/sentry/.venv/sentry/local/bin/sentry&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        -- --config&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/home/sentry/.sentry/&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        run worker &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; /var/log/sentry-worker.log &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
end script

post-stop script
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; -f /var/run/sentry-worker.pid &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; /var/run/sentry-worker.pid
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
end script&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# /etc/init/sentry-cron.conf&lt;/span&gt;
start on runlevel &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2345&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
stop on runlevel &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;016&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

respawn limit &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;USER&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;www-data
&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;PATH&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&lt;span class=&quot;token function&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;PWD&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/usr/local/lib/python2.7/dist-packages

pre-start script
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; -f /var/log/sentry-cron.log &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; /var/log/sentry-cron.log
    &lt;span class=&quot;token function&quot;&gt;chown&lt;/span&gt; -f &lt;span class=&quot;token environment constant&quot;&gt;$USER&lt;/span&gt; /var/log/sentry-cron.log
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
end script

script
&lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; /home/sentry/activate
start-stop-daemon --start &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --make-pidfile --pidfile /var/run/sentry-cron.pid &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --chuid &lt;span class=&quot;token environment constant&quot;&gt;$USER&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --chdir &lt;span class=&quot;token environment constant&quot;&gt;$PWD&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  --exec /home/sentry/.venv/sentry/local/bin/sentry&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        -- --config&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/home/sentry/.sentry/&lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
        run &lt;span class=&quot;token function&quot;&gt;cron&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; /var/log/sentry-cron.log &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
end script

post-stop script
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; -f /var/run/sentry-cron.pid &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; /var/run/sentry-cron.pid
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
end script&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;이전 버전의 경우 환경설정의 경로를 &lt;code class=&quot;language-text&quot;&gt;{your path}/sentry/sentry.conf.py&lt;/code&gt; 로 표기하는 경우가 있는데 그럴경우 secret-key 가 없어서 새로 생성하라는 메시지가 뜨는 경우가 있다. 실제로 secret-key가 없는 경우일수도 있지만, 경로가 잘못되어서 발생하는 문제일 수 있다. 최신버전의 sentry는 config.yaml 파일에 secret-key가 존재하기에 최신버전의 경우 환경설정파일 경로를  &lt;code class=&quot;language-text&quot;&gt;{your path}/sentry/&lt;/code&gt; 로 지정해주어야 한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;sentry-upgrade&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#sentry-upgrade&quot; aria-label=&quot;sentry upgrade permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sentry Upgrade&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;내용 정리 필요. 일단 간단하게 마구 작성함&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;sentry 설치된 서버에 ssh로 접근&lt;/li&gt;
&lt;li&gt;sentry가 설치된 python 환경설정 on&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sentry upgrade &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;pip &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -U sentry&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;설치 다되면, 설정 파일 새로 만들어줌., 단 무조건 꼭 만들어야 하는건 아니고 나도 새로 안만들고 함 하지만 문서를 보면 major update인 경우에는 설정 파일을 새로 만드는 것을 추천한다고 쓰여 있음.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;sentry 업그레이드를 진행함&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;sentry upgrade&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;그대로 진행하면 upgrade가 됨 이제 sentry의 모든 서비스들을 새로 켜줘야함.
web, worker, cron 등을 모두 종료했다가 새로 켜줌., 그러면 upgrade 완료&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;sentry upgrade 참조 링크&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.sentry.io/server/upgrading/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://docs.sentry.io/server/upgrading/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;sentry upgrade&lt;/code&gt; 명령어 실행시 &lt;code class=&quot;language-text&quot;&gt;superuser&lt;/code&gt; 문제에 따른 권한 이슈가 나온다 &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;그럴때 아래 링크 참조&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/getsentry/sentry/issues/6098#issuecomment-329824716&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://github.com/getsentry/sentry/issues/6098#issuecomment-329824716&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;링크 정리 후 내용 정리&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;메일 발송 기능 내용 추가 update 필요&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;config.yaml&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;###############
# Mail Server #
###############

mail.backend: &amp;#39;smtp&amp;#39;  # Use dummy if you want to disable email entirely
mail.host: &amp;#39;kinx.net&amp;#39;
mail.port: 25
mail.username: &amp;#39;&amp;#39;
mail.password: &amp;#39;&amp;#39;
mail.use-tls: false
# The email address to send on behalf of
mail.from: &amp;#39;sentry@kinx.net&amp;#39;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;sentry.conf.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ENV_CONFIG_MAPPING = {
    &amp;#39;SENTRY_EMAIL_PASSWORD&amp;#39;: &amp;#39;mail.password&amp;#39;,
    &amp;#39;SENTRY_EMAIL_USER&amp;#39;: &amp;#39;mail.username&amp;#39;,
    &amp;#39;SENTRY_EMAIL_PORT&amp;#39;: (&amp;#39;mail.port&amp;#39;, Int),
    &amp;#39;SENTRY_EMAIL_USE_TLS&amp;#39;: (&amp;#39;mail.use-tls&amp;#39;, Bool),
    &amp;#39;SENTRY_EMAIL_HOST&amp;#39;: &amp;#39;mail.host&amp;#39;,
    &amp;#39;SENTRY_SERVER_EMAIL&amp;#39;: &amp;#39;mail.from&amp;#39;,
    &amp;#39;SENTRY_ENABLE_EMAIL_REPLIES&amp;#39;: (&amp;#39;mail.enable-replies&amp;#39;, Bool),
    &amp;#39;SENTRY_EMAIL_LIST_NAMESPACE&amp;#39;: &amp;#39;mail.list-namespace&amp;#39;,
    &amp;#39;SENTRY_SMTP_HOSTNAME&amp;#39;: &amp;#39;reply.getsentry.com&amp;#39;,
    &amp;#39;SENTRY_SECRET_KEY&amp;#39;: &amp;#39;system.secret-key&amp;#39;,
    &amp;#39;SENTRY_SMTP_HOST&amp;#39;: &amp;#39;0.0.0.0&amp;#39;,
    &amp;#39;SENTRY_SMTP_PORT&amp;#39;: 1025,


    # If you&amp;#39;re using mailgun for inbound mail, set your API key and configure a
    # route to forward to /api/hooks/mailgun/inbound/
    &amp;#39;SENTRY_MAILGUN_API_KEY&amp;#39;: &amp;#39;mail.mailgun-api-key&amp;#39;,
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;추가로 저런식으로 해도 이상하게 use-tls가 계속 True로 잡히고, domain 주소가 바뀌지 않아서 직접 module 코드를 수정해 줘야함&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;sentry/utils/email.py&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# 설치된 sentry 모듈에서 위의 파일경로를 찾아가서 직접 수정
...
def get_connection(fail_silently=False):
    &amp;quot;&amp;quot;&amp;quot;
    Gets an SMTP connection using our OptionsStore
    &amp;quot;&amp;quot;&amp;quot;
    return _get_connection(
        backend=get_mail_backend(),
        host=&amp;#39;localhost&amp;#39;,
        # host=options.get(&amp;#39;mail.host&amp;#39;),
        port=25,
        # port=options.get(&amp;#39;mail.port&amp;#39;),
        username=options.get(&amp;#39;mail.username&amp;#39;),
        password=options.get(&amp;#39;mail.password&amp;#39;),
        use_tls=False,
        # use_tls=options.get(&amp;#39;mail.use-tls&amp;#39;),
        timeout=options.get(&amp;#39;mail.timeout&amp;#39;),
        fail_silently=fail_silently,
    )
...

...
def send_messages(messages, fail_silently=False):
    connection = get_connection(fail_silently=fail_silently)

    # 아래의 로직은 from_email 주소를 특정 domain으로 수정하기 위한 작업
    for message in messages:
      message.from_email = &amp;#39;sentry@kinx.net&amp;#39;

    sent = connection.send_messages(messages)
    metrics.incr(&amp;#39;email.sent&amp;#39;, len(messages), skip_internal=False)
    for message in messages:
        extra = {
            &amp;#39;message_id&amp;#39;: message.extra_headers[&amp;#39;Message-Id&amp;#39;],
            &amp;#39;size&amp;#39;: len(message.message().as_bytes()),
        }
        logger.info(&amp;#39;mail.sent&amp;#39;, extra=extra)
    return sent
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;</content:encoded></item></channel></rss>