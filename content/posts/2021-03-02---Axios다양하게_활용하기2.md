---
title: "Axios ë‹¤ì–‘í•˜ê²Œ í™œìš©í•˜ê¸°: interceptor"
date: 2021-03-02T08:01:14.627Z
template: "post"
draft: false
slug: "/posts/Axiosë‹¤ì–‘í•˜ê²Œ_í™œìš©í•˜ê¸°-interceptor/"
category: "develop"
tags:
  - "javascript"
  - "axios"
  - "interceptor"
description: axiosì—ì„œ interceptorë¥¼ í™œìš©í•œ ë°©ë²•ì— ëŒ€í•´ì„œ ê°„ëµíˆ ë‹¤ë£¹ë‹ˆë‹¤.
---

> ğŸ’¡ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë©´ì„œ ê°œì¸ì ìœ¼ë¡œ ì •ë¦¬í•œ ë‚´ìš©ë“¤ì…ë‹ˆë‹¤. ê¸€ì´ ê¹”ë”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ“” ì´ì „ê¸€ ë³´ê¸°: [Axios ë‹¤ì–‘í•˜ê²Œ í™œìš©í•˜ê¸°: async/awaitì‚¬ìš©](/posts/Axiosë‹¤ì–‘í•˜ê²Œ_í™œìš©í•˜ê¸°-async_awaitì‚¬ìš©/)

# Axios ëª¨ë“ˆì— ê³µí†µ ì„¤ì •ì„ ì ìš©í•˜ì—¬ ì‚¬ìš©í•˜ê¸°

## Axiosì— ê¸°ë³¸ì„¤ì • ì ìš©í•˜ê¸°

```jsx
// reactë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±
import Axios from "axios";

const axiosInstance = Axios.create({
  timeout: 5000,
  headers: {
    "Content-Type": "application/json",
  },
});

// ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ìœ¼ë¡œ ìœ„ì˜ timeout ë° header ì„¤ì •ì´ ë˜ì–´ìˆë‹¤.
axiosInstance.get("https://test.com/api/v1");
```

ìœ„ì™€ ê°™ì´ axiosInstanceë¼ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ëª¨ë“  axios í˜¸ì¶œì‹œì— timout ì œí•œì´ 5ì´ˆë¡œ ì„¤ì •ë˜ê³ , headersì— `application/json` ì„¤ì •ì´ ë“¤ì–´ê°€ê²Œ ëœë‹¤.

## Axiosì—ì„œ requestì™€ responseë¥¼ interceptor í•˜ê¸°

AxiosëŠ” ìœ„ì—ì„œë„ ì–¸ê¸‰í–ˆë“¯ì´ http í†µì‹ ì„ ìœ„í•œ ëª¨ë“ˆë£Œ RestAPIì™€ í†µì‹ ì„ í•˜ëŠ”ë° ë§ì´ ì‚¬ìš©ëœë‹¤. ë¬¸ì„œë¥¼ ë³´ë©´ ì—¬ëŸ¬ê°€ì§€ ì‚¬ìš©ë²•ë“±ì´ ìˆì§€ë§Œ, ë³¸ì¸ì´ ì‹ ê·œ í”„ë¡œì íŠ¸ ì§„í–‰ì‹œì— ê°€ì¥ ë•ì„ ë³´ì•˜ë˜ ë¶€ë¶„ì€ requestì™€ responseë¥¼ `interceptor` í•˜ëŠ” ë¶€ë¶„ì´ì—ˆë‹¤.

ì´ë¦„ ê·¸ëŒ€ë¡œ request/response ì´ë²¤íŠ¸ë¥¼ interceptor í•˜ëŠ”ë°, request ì‹œì—ëŠ” serverë¡œ ìš”ì²­ë³´ë‚´ê¸° ë°”ë¡œì „ì˜ ì •ë³´ë¥¼ interceptorí•˜ë©°, responseëŠ” ì„œë²„ì—ì„œ ìš”ì²­ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ frontë¡œ returní•˜ê¸°ì „ì— interceptorê°€ ê°€ëŠ¥í•˜ë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ì½”ë“œë¥¼ ë³´ì

```jsx
// requestë¥¼ interceptor í•˜ê¸°
axiosInstance.interceptors.request.use(
  config => {
    /** configì—ëŠ” ìœ„ì˜ axiosInstance ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ requestë¥¼ ë³´ëƒˆì„ë–„ì˜ ëª¨ë“  ì„¤ì •ê°’ë“¤ì´ ë“¤ì–´ìˆë‹¤.
     * [í™œìš©]
     * 1. apiìš”ì²­ì˜ ê²½ìš° tokenì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆëŠ”ë°, í•„ìš”ì— ë”°ë¥¸ í† í° ì •ë³´ë“¤ì„ ì—¬ê¸°ì„œ ì²˜ë¦¬í•  ê²½ìš°
     * í† í°ì— ëŒ€í•œ ì •ë³´ë¥¼ ì—¬ëŸ¬ê³³ì—ì„œ ì²˜ë¦¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
     * 2. ìš”ì²­ methodì— ë”°ë¥¸ ì™¸ë¶€ë¡œ ë“œëŸ¬ë‚´ì§€ ì•Šê³  ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ë¶€ë¶„ì— ëŒ€í•œ ì‘ì—…ì´ ê°€ëŠ¥
     */
    return config;
  },
  err => {
    /** request ìš”ì²­ì„ ë³´ë‚¼ë•Œ errorê°€ ë°œìƒí•˜ëŠ” ê²½ìš° ì—¬ê¸°ì„œ catchê°€ ê°€ëŠ¥í•˜ë‹¤.
     */
    return Promise.reject(err);
  },
);

// responseë¥¼ interceptor í•˜ê¸°
axiosInstance.interceptors.response.use(
  config => {
    /** ìš”ì²­ì„ ë³´ë‚¸ ë’¤ì— response(ì‘ë‹µ)ì´ ì˜¤ëŠ” ê²½ìš°ì— ì—¬ê¸°ì„œ ë¨¼ì € í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.
     * [í™œìš©]
     * 1. status-codeê°€ ì •ìƒì ì´ì–´ë„ ë‚´ìš©ìƒì˜ ì´ìœ ë¡œ ì—ëŸ¬ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš°
     * 2. ë¯¼ê°ì •ë³´ ë˜ëŠ” ë°ì´í„°ì— ëŒ€í•œ ê°€ê³µ ì‘ì—…
     */
    return config;
  },
  ({ config, request, response, ...err }) => {
    /** responseì‘ë‹µ í›„ì— status-codeê°€ 4xx, 5xx ì²˜ëŸ¼ ì—ëŸ¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²½ìš° í•´ë‹¹ ë£¨íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.
     */
    const errMsg = 'Error Message';
    return Promise.reject({
      config,
      message: errMsg,
      response,
      ...err,
    });
  },
);
```

ìœ„ì˜ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ì¢€ë” ë‹¤ì–‘í•˜ê²Œ í™œìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

## Custom Axios í™œìš©

ìœ„ì—ì„œ ì‘ì„±í•œê²ƒì²˜ëŸ¼ custom axios íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œ í™œìš©í•˜ì. ìš°ì„  í•„ìš”ì— ë”°ë¥¸ ê¸°ëŠ¥ë“¤ì´ êµ¬í˜„ëœ ë³„ë„ì˜ íŒŒì¼ì„ ì•„ë˜ì²˜ëŸ¼ ë§Œë“ ë‹¤.

```jsx
// axiosConfig.js
import React from 'react';

import Axios from 'axios';

const axiosInstance = Axios.create({
  timeout: 5000,
  headers: {
    'Content-Type': 'application/json',
  },
});

axiosInstance.interceptors.request.use(
  config => {
    return config;
  },
  err => {
    return Promise.reject(err);
  },
);

axiosInstance.interceptors.response.use(
  config => {
    return config;
  },
  err => {
    return Promise.reject(err);
  },
);

export default axiosInstance;
```

ì‚¬ìš©í•˜ë ¤ëŠ” ìœ„ì¹˜ì—ì„œ í•´ë‹¹ íŒŒì¼ì„ import í•œë’¤ ê¸°ì¡´ì—” axiosë¥¼ ì‚¬ìš©í•˜ë“¯ì´ ì´ìš©í•œë‹¤

```jsx
// App.js
import React from 'react';

import axiosInstance from 'axiosConfig' // í•´ë‹¹ import ìœ„ì¹˜ëŠ” axiosConfig.js íŒŒì¼ ìœ„ì¹˜ì— ë”°ë¼ ë‹¤ë¥´ë‹¤/

...

axiosInstance.get('https://test.com/api/v1')
```

ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ ì„¤ì •ëœ axios ì½”ë“œë¥¼ import í•˜ì—¬ ê¸°ì¡´ axios ë¥¼ ì‚¬ìš©í•˜ë“¯ì´ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
